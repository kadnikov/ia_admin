"use strict";var App=angular.module("app",["ngLocale","ngCookies","ngResource","ngSanitize","pascalprecht.translate","ui.bootstrap","ui.router","ui.utils","angular-growl","angularMoment","angularUtils.directives.dirPagination","angular-jqgrid","app.partials","app.common.config","app.common.directives","app.common.services","app.search.services","app.todo.controllers","app.todo.services","app.cmis.services"]);angular.module("angular-jqgrid",[]).directive("jqGrid",function(){return{restrict:"EA",template:"<table></table>",scope:{dataset:"=",options:"=",callback:"=",pager:"="},link:function(scope,element,attributes){var jqGrid=null,height=attributes.height||"100%",init=function(){var gridObj;if(void 0===scope.dataset)return gridObj;var options={};return options.data=scope.dataset,options=$.extend(!0,options,scope.options),options.height=height,gridObj=$(element.children()[0]).jqGrid(options),scope.callback&&scope.callback(gridObj),gridObj};$(window).on("resize",function(){var parentElement=angular.element(element).parent();jqGrid.setGridWidth(parentElement.width())});var onOptionsChanged=function(){jqGrid=init()},unwatchOptions=scope.$watch("options",onOptionsChanged,!0),onDatasetChanged=function(dataset){var startDataChanged=(new Date).getTime();if(jqGrid){if(jqGrid.jqGrid("clearGridData"),jqGrid.get(0).p.treeGrid){var perfTime=(new Date).getTime();jqGrid.get(0).addJSONData({rows:dataset}),console.log("addJSONData : ",(new Date).getTime()-perfTime,"ms")}else jqGrid.jqGrid("setGridParam",{datatype:"local",data:dataset,rowNum:dataset.length});return console.log("onDatasetChanged : ",(new Date).getTime()-startDataChanged,"ms"),jqGrid.trigger("reload")}jqGrid=init()},unwatchDataset=scope.$watch("dataset",onDatasetChanged,!1);element.on("$destroy",function(){unwatchDataset(),unwatchOptions()})}}}),angular.module("app.common.config",[]).config(["$urlRouterProvider","$locationProvider",function($urlRouterProvider,$locationProvider){$urlRouterProvider.otherwise("/"),$locationProvider.html5Mode(!1)}]).config(["$translateProvider",function($translateProvider){$translateProvider.useStaticFilesLoader({prefix:"/iaadmin/frontend/i18n/",suffix:".json"}),$translateProvider.preferredLanguage("en"),$translateProvider.useLocalStorage(),$translateProvider.useMissingTranslationHandlerLog()}]).config(["growlProvider",function(growlProvider){growlProvider.globalTimeToLive(5e3)}]),angular.module("app.common.directives",[]).directive("staticInclude",["$http","$templateCache","$compile",function($http,$templateCache,$compile){return function(scope,element,attrs){var templatePath=attrs.staticInclude;$http.get(templatePath,{cache:$templateCache}).success(function(response){var contents=$("<div/>").html(response).contents();element.html(contents),$compile(contents)(scope)})}}]),angular.module("app.common.services",[]).service("NotificationService",["$rootScope","growl",function($rootScope,growl){function displayNotification(message,type){"success"===type?growl.addSuccessMessage(message):"warn"===type?growl.addWarnMessage(message):"info"===type?growl.addInfoMessage(message):growl.addErrorMessage(message)}var flashMessageQueue=[];return $rootScope.$on("$stateChangeSuccess",function(){for(;flashMessageQueue.length>0;){var item=flashMessageQueue.shift();item&&displayNotification(item.message,item.type)}}),{flashMessage:function(message,type){flashMessageQueue.push({message:message,type:type||"info"})}}}]),angular.module("app.cmis.services",["ngResource"]).factory("CMIS",["$resource","NotificationService",function($resource){var api=$resource("/jooq/browser/test/root?cmisselector=children&objectId=:id",{id:"@id"},{query:{method:"GET",params:{},isArray:!1}});return{query:function(folderId,pageNumber,pageSize){return api.query({id:folderId,page:pageNumber,size:pageSize,sort:"ID,DESC"}).$promise}}}]),angular.module("app.todo.controllers",[]).constant("paginationConfig",{pageSize:200}).config(["$stateProvider",function($stateProvider){$stateProvider.state("todo",{url:"/","abstract":!0,template:"<ui-view/>"}).state("todo.index",{url:"",controller:"TodoListController",templateUrl:"frontend/partials/todo/todo-list.html",resolve:{searchResults:["Todos","paginationConfig",function(Todos,paginationConfig){return Todos.query(0,paginationConfig.pageSize)}]}}).state("todo.tree",{url:"todo/tree",controller:"TodoTreeController",templateUrl:"frontend/partials/todo/todo-tree.html",resolve:{searchResults:["CMIS","paginationConfig","$stateParams",function(CMIS,paginationConfig){return CMIS.query("0",0,paginationConfig.pageSize)}]}}).state("todo.page",{url:"todo/page/:pageNumber/size/:pageSize",controller:"TodoListController",templateUrl:"frontend/partials/todo/todo-list.html",resolve:{searchResults:["Todos","$stateParams",function(Todos,$stateParams){return Todos.query($stateParams.pageNumber-1,$stateParams.pageSize)}]}}).state("todo.add",{url:"todo/add",controller:"AddTodoController",templateUrl:"frontend/partials/todo/add-todo.html"}).state("todo.edit",{url:"todo/:todoId/edit",controller:"EditTodoController",templateUrl:"frontend/partials/todo/edit-todo.html",resolve:{updatedTodo:["Todos","$stateParams",function(Todos,$stateParams){return $stateParams.todoId?Todos.get($stateParams.todoId):null}]}}).state("todo.search",{url:"todo/search/:searchTerm/page/:pageNumber/size/:pageSize",controller:"SearchResultController",templateUrl:"frontend/partials/search/search-results.html",resolve:{searchTerm:["$stateParams",function($stateParams){return $stateParams.searchTerm}],searchResults:["Search","$stateParams",function(Search,$stateParams){return $stateParams.searchTerm?Search.findBySearchTerm($stateParams.searchTerm,$stateParams.pageNumber-1,$stateParams.pageSize):null}]}}).state("todo.view",{url:"todo/:todoId",controller:"ViewTodoController",templateUrl:"frontend/partials/todo/view-todo.html",resolve:{viewedTodo:["Todos","$stateParams",function(Todos,$stateParams){return $stateParams.todoId?Todos.get($stateParams.todoId):null}]}})}]).controller("TodoListController",["$scope","$state","searchResults","paginationConfig",function($scope,$state,searchResults,paginationConfig){console.log("Rendering documents."),$scope.todos=searchResults.content,console.log(searchResults),console.log(searchResults.totalElements),console.log(paginationConfig.pageSize),$scope.pagination={currentPage:searchResults.number+1,itemsPerPage:paginationConfig.pageSize,totalItems:searchResults.totalElements},$scope.addTodo=function(){$state.go("todo.add")},$scope.pageChanged=function(newPageNumber){$state.go("todo.page",{pageNumber:newPageNumber,pageSize:paginationConfig.pageSize},{reload:!0,inherit:!0,notify:!0})}}]).controller("TodoTreeController",["$scope","$state","searchResults","paginationConfig",function($scope,$state,searchResults,paginationConfig){$("#MySplitter").height(600).split({orientation:"vertical",limit:10,position:"20%"});console.log("Rendering documents tree.");var currentDefFormId="",cmis_root="/jooq/browser/test/root";$("#treecontainer").jstree({core:{data:{url:function(node){return"#"===node.id?cmis_root+"?objectId=0&cmisselector=children":cmis_root+"?objectId="+node.id+"&cmisselector=children"},dataFilter:function(data){var nodes=[];return $.each(JSON.parse(data).objects,function(i,item){var node={};node.id=item.object.properties["cmis:objectId"].value,node.data={type:item.object.properties["cmis:objectTypeId"].value},node.text=item.object.properties["cmis:name"].value,"cmis:folder"==item.object.properties["cmis:objectTypeId"].value&&(node.children=!0),nodes.push(node)}),JSON.stringify(nodes)},data:function(node){return console.log(node),{id:node.id,text:"1"}}}}}),$("#treecontainer").on("select_node.jstree",function(e,data){if(console.log("node_id: "+data.node.type+" - "+data.node.id),"cmis:folder"==data.node.data.type)$scope.loadGrid(data.node.id);else{var docid=parseInt(data.node.id),viewsUrl="/jooq/api/docs/"+docid;$.getJSON(viewsUrl,function(viewdata){"view"==viewdata.type?(currentDefFormId=viewdata.data.defaultForm,$scope.loadGrid("0",viewdata)):$state.go("todo.view",{todoId:docid},{reload:!0,inherit:!0,notify:!0})})}}),$scope.loadGrid=function(folderId,viewdata){console.log("Rendering documents grid."),$("#jqGrid").jqGrid("GridUnload");var dateOptions={dataInit:function(element){$(element).datepicker({id:"orderDate_datePicker",dateFormat:"yy-mm-dd",maxDate:new Date(2020,0,1),showOn:"focus"})},sopt:["gt","lt","eq"]},editSettings={recreateForm:!0,jqModal:!1,reloadAfterSubmit:!1,closeOnEscape:!0,savekey:[!0,13],closeAfterEdit:!0,afterShowForm:function(){$("#lui_"+grid[0].id).hide()}},addSettings={recreateForm:!0,jqModal:!1,reloadAfterSubmit:!1,savekey:[!0,13],closeOnEscape:!0,closeAfterAdd:!0,afterShowForm:function(){$("#lui_"+grid[0].id).hide()}},delSettings={processing:!0},id=folderId,viewEntriesUrl=cmis_root+"?objectId="+id+"&cmisselector=children",sys_fields=["id","type","title","description","modifier","modificationTime","autor","creationTime"],fields=["id","title","description","modifier","modificationTime"],rowSize=paginationConfig.pageSize,columns=[{name:"id",key:!0,width:75,jsonmap:"object.properties.cmis:objectId.value"},{name:"type",label:"Тип",width:100,jsonmap:"object.properties.cmis:objectTypeId.value"},{name:"title",label:"Заголовок",width:150,jsonmap:"object.properties.cmis:name.value"},{name:"description",label:"Описание",width:150,jsonmap:"object.properties.cmis:description.value"},{name:"author",label:"Создал",width:150,jsonmap:"object.properties.cmis:createdBy.value"},{name:"creationTime",label:"Дата создания",width:150,jsonmap:"object.properties.cmis:creationDate.value",formatter:"date",formatoptions:{srcformat:"U/1000",newformat:"d.m.Y H:i"},sorttype:"date",searchoptions:dateOptions},{name:"modifier",label:"Изменил",width:150,jsonmap:"object.properties.cmis:lastModifiedBy.value"},{name:"modificationTime",label:"Дата изменения",width:150,jsonmap:"object.properties.cmis:lastModificationDate.value",formatter:"date",formatoptions:{srcformat:"U/1000",newformat:"d.m.Y H:i"},sorttype:"date",searchoptions:dateOptions}];console.log(viewdata),null!=viewdata&&(viewEntriesUrl=viewdata.data.query+"?fields=",fields=[],columns=[],$.each(viewdata.data.columnDescriptions,function(i,item){if(0!=item.visible){var colWidth=140;item.width&&(colWidth=parseInt(item.width));var fieldOps={name:item.field,label:item.name,width:colWidth};item.sortField&&(fieldOps.index=item.sortField),-1==$.inArray(item.field,sys_fields)&&(fieldOps.jsonmap="data."+item.field,fields.push(item.field)),"INTEGER"==item.type&&(fieldOps.searchoptions={sopt:["gt","lt","eq"]}),"DATE"==item.type&&(fieldOps.sorttype="date",fieldOps.searchoptions=dateOptions),columns.push(fieldOps)}}),console.log(columns),viewEntriesUrl+=fields.join(),viewEntriesUrl+="&size="+rowSize,console.log(viewEntriesUrl)),$("#jqGrid").jqGrid({url:viewEntriesUrl,mtype:"GET",datatype:"json",page:1,colModel:columns,autowidth:!0,shrinkToFit:!1,height:"100%",maxHeight:500,rowNum:paginationConfig.pageSize,serializeGridData:function(postData){return"number"==typeof postData.page&&postData.page--,postData.sort=null!=postData.sidx&&""!=postData.sidx?postData.sidx+","+postData.sord:"ID,DESC",postData},jsonReader:{repeatitems:!1,root:function(data){return data.content?data.content:data.objects},total:function(data){return data.totalPages},page:function(data){return data.number+1},records:function(data){return data.totalElements?data.totalElements:data.numItems}},onSelectRow:function(ids){if(null==ids)loadGridCMIS("0");else{var rowData=$("#jqGrid").getRowData(ids);if(console.log("Type: "+rowData.type),"cmis:folder"==rowData.type)$scope.loadGrid(ids);else{console.log("request doc "+ids);var docid=parseInt(ids),viewsUrl="/jooq/api/docs/"+docid;$.getJSON(viewsUrl,function(viewdata){"view"==viewdata.type?(currentDefFormId=viewdata.data.defaultForm,$scope.loadGrid("0",viewdata)):$state.go("todo.view",{todoId:docid},{reload:!0,inherit:!0,notify:!0})})}}},scroll:1,emptyrecords:"Scroll to bottom to retrieve new page",pager:"#jqGridPager",loadComplete:function(){$("tr.jqgrow",this).contextMenu("folderMenu",{bindings:{edit:function(trigger){$("#jqGrid").editGridRow(trigger.id,editSettings)},add:function(){$("#jqGrid").editGridRow("new",addSettings)},del:function(trigger){$("#del").hasClass("ui-state-disabled")===!1&&$("#jqGrid").delGridRow(trigger.id,delSettings)}},onContextMenu:function(event){var rowId=$(event.target).closest("tr.jqgrow").attr("id");return $("#del").attr("disabled",Number(rowId)%2===0),Number(rowId)%2===0?$("#del").attr("disabled","disabled").addClass("ui-state-disabled"):$("#del").removeAttr("disabled").removeClass("ui-state-disabled"),!0}})}}),$("#jqGrid").navGrid("#jqGridPager",{search:!0,add:!1,edit:!1,del:!1,refresh:!0},{},{},{},{multipleSearch:!0,uniqueSearchFields:!0,multipleGroup:!0})},$scope.loadGrid("0")}]).controller("AddTodoController",["$scope","$state","Todos",function($scope,$state,Todos){console.log("Rendering add todo entry page."),$scope.todo={},$scope.saveTodo=function(){if($scope.todoForm.$valid){var onSuccess=function(added){$state.go("todo.view",{todoId:added.id},{reload:!0,inherit:!0,notify:!0})};$scope.todo.data=JSON.parse($scope.todo.data),Todos.save($scope.todo,onSuccess)}}}]).controller("DeleteTodoController",["$scope","$modalInstance","$state","Todos","deletedTodo",function($scope,$modalInstance,$state,Todos,deletedTodo){$scope.todo=deletedTodo,$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.delete=function(){var onSuccess=function(){$modalInstance.close(),$state.go("todo.index",{},{reload:!0,inherit:!0,notify:!0})};Todos.delete($scope.todo,onSuccess)}}]).controller("EditTodoController",["$scope","$state","updatedTodo","Todos",function($scope,$state,updatedTodo,Todos){console.log(updatedTodo),$scope.todo=updatedTodo,$scope.todo.data=JSON.stringify($scope.todo.data),$scope.saveTodo=function(){if($scope.todoForm.$valid){var onSuccess=function(updated){$state.go("todo.view",{todoId:updated.id},{reload:!0,inherit:!0,notify:!0})};$scope.todo.data=JSON.parse($scope.todo.data),Todos.update($scope.todo,onSuccess)}}}]).controller("SearchController",["$scope","$state","paginationConfig",function($scope,$state,paginationConfig){var userWritingSearchTerm=!1,minimumSearchTermLength=3;$scope.missingChars=minimumSearchTermLength,$scope.searchTerm="",$scope.searchFieldBlur=function(){userWritingSearchTerm=!1},$scope.searchFieldFocus=function(){userWritingSearchTerm=!0},$scope.showMissingCharacterText=function(){return userWritingSearchTerm&&$scope.searchTerm.length<minimumSearchTermLength?!0:!1},$scope.search=function(){$scope.searchTerm.length<minimumSearchTermLength?$scope.missingChars=minimumSearchTermLength-$scope.searchTerm.length:($scope.missingChars=0,$state.go("todo.search",{searchTerm:$scope.searchTerm,pageNumber:1,pageSize:paginationConfig.pageSize},{reload:!0,inherit:!0,notify:!0}))}}]).controller("SearchResultController",["$scope","$state","paginationConfig","searchTerm","searchResults",function($scope,$state,paginationConfig,searchTerm,searchResults){console.log("Rendering search results page."),$scope.todos=searchResults.content,$scope.pagination={currentPage:searchResults.number+1,itemsPerPage:paginationConfig.pageSize,totalItems:searchResults.totalElements},$scope.pageChanged=function(newPageNumber){$state.go("todo.search",{searchTerm:searchTerm,pageNumber:newPageNumber,pageSize:paginationConfig.pageSize},{reload:!0,inherit:!0,notify:!0})}}]).controller("ViewTodoController",["$scope","$state","$modal","viewedTodo",function($scope,$state,$modal,viewedTodo){console.log("Rendering view todo entry page."),$scope.todo=viewedTodo,$scope.showEditPage=function(){$state.go("todo.edit",{todoId:$scope.todo.id},{reload:!0,inherit:!0,notify:!0})},$scope.showDeleteDialog=function(){$modal.open({templateUrl:"frontend/partials/todo/delete-todo-modal.html",controller:"DeleteTodoController",resolve:{deletedTodo:function(){return $scope.todo}}})}}]),angular.module("app.todo.services",["ngResource"]).factory("Todos",["$resource","NotificationService",function($resource,NotificationService){var api=$resource("/api/docs/:id",{id:"@id"},{query:{method:"GET",params:{},isArray:!1},get:{method:"GET"},save:{method:"POST"},update:{method:"PUT"}});return{"delete":function(todo,successCallback){return api.delete(todo,function(){NotificationService.flashMessage("todo.notifications.delete.success","success"),successCallback()})},query:function(pageNumber,pageSize){return api.query({page:pageNumber,size:pageSize,sort:"ID,DESC"}).$promise},get:function(todoId){return api.get({id:todoId}).$promise},save:function(todo,successCallback){api.save(todo,function(added){NotificationService.flashMessage("todo.notifications.add.success","success"),successCallback(added)})},update:function(todo,successCallback){api.update(todo,function(updated){NotificationService.flashMessage("todo.notifications.update.success","success"),successCallback(updated)})}}}]),angular.module("demo",["blueimp.fileupload"]).config(["$httpProvider","fileUploadProvider",function($httpProvider,fileUploadProvider){delete $httpProvider.defaults.headers.common["X-Requested-With"],fileUploadProvider.defaults.redirect=window.location.href.replace(/\/[^\/]*$/,"/cors/result.html?%s")}]).controller("DemoFileUploadController",["$scope","$http","$filter","$window",function($scope){$scope.options={url:url}}]).controller("FileDestroyController",["$scope","$http",function($scope,$http){var state,file=$scope.file;file.url?(file.$state=function(){return state},file.$destroy=function(){return state="pending",$http({url:file.deleteUrl,method:file.deleteType}).then(function(){state="resolved",$scope.clear(file)},function(){state="rejected"})}):file.$cancel||file._index||(file.$cancel=function(){$scope.clear(file)})}]),angular.module("app.search.services",["ngResource"]).factory("Search",["$resource",function($resource){var api=$resource("/api/docs/search",{},{query:{method:"GET",isArray:!1}});return{findBySearchTerm:function(searchTerm,pageNumber,pageSize){return api.query({page:pageNumber,searchTerm:searchTerm,size:pageSize,sort:"ID,DESC"}).$promise}}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsIm1vZHVsZS9jb21tb24vYW5ndWxhci1qcWdyaWQuanMiLCJtb2R1bGUvY29tbW9uL2NvbW1vbi5jb25maWcuanMiLCJtb2R1bGUvY29tbW9uL2NvbW1vbi5kaXJlY3RpdmVzLmpzIiwibW9kdWxlL2NvbW1vbi9jb21tb24uc2VydmljZXMuanMiLCJtb2R1bGUvdG9kby9jbWlzLnNlcnZpY2VzLmpzIiwibW9kdWxlL3RvZG8vdG9kby5jb250cm9sbGVycy5qcyIsIm1vZHVsZS90b2RvL3RvZG8uc2VydmljZXMuanMiLCJtb2R1bGUvdG9kby90b2RvLnVwbG9hZC5qcyIsIm1vZHVsZS9zZWFyY2gvc2VhcmNoLnNlcnZpY2VzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBRUEsSUFBQSxLQUFBLFFBQUEsT0FBQSxPQUNBLFdBQ0EsWUFDQSxhQUNBLGFBQ0EseUJBQ0EsZUFDQSxZQUNBLFdBQ0EsZ0JBQ0EsZ0JBQ0Esd0NBRUEsaUJBR0EsZUFHQSxvQkFBQSx3QkFBQSxzQkFHQSxzQkFHQSx1QkFBQSxvQkFFQSxxQkNEQSxTQUFBLE9BQUEscUJBQUEsVUFBQSxTQUFBLFdBQ0EsT0FDQSxTQUFBLEtBQ0EsU0FBQSxrQkFDQSxPQUNBLFFBQUEsSUFDQSxRQUFBLElBQ0EsU0FBQSxJQUNBLE1BQUEsS0FFQSxLQUFBLFNBQUEsTUFBQSxRQUFBLFlBQ0EsR0FBQSxRQUFBLEtBQ0EsT0FBQSxXQUFBLFFBQUEsT0FFQSxLQUFBLFdBQ0EsR0FBQSxRQUVBLElBQUEsU0FBQSxNQUFBLFFBRUEsTUFBQSxRQUdBLElBQUEsV0FjQSxPQVpBLFNBQUEsS0FBQSxNQUFBLFFBRUEsUUFBQSxFQUFBLFFBQUEsRUFBQSxRQUFBLE1BQUEsU0FFQSxRQUFBLE9BQUEsT0FFQSxRQUFBLEVBQUEsUUFBQSxXQUFBLElBQUEsT0FBQSxTQUVBLE1BQUEsVUFDQSxNQUFBLFNBQUEsU0FHQSxRQU9BLEdBQUEsUUFBQSxHQUFBLFNBQUEsV0FDQSxHQUFBLGVBQUEsUUFBQSxRQUFBLFNBQUEsUUFDQSxRQUFBLGFBQUEsY0FBQSxVQU1BLElBQUEsa0JBQUEsV0FDQSxPQUFBLFFBR0EsZUFBQSxNQUFBLE9BQUEsVUFBQSxrQkFBQSxHQUVBLGlCQUFBLFNBQUEsU0FDQSxHQUFBLG1CQUFBLEdBQUEsT0FBQSxTQUNBLElBQUEsT0FBQSxDQUlBLEdBRkEsT0FBQSxPQUFBLGlCQUVBLE9BQUEsSUFBQSxHQUFBLEVBQUEsU0FBQSxDQUNBLEdBQUEsV0FBQSxHQUFBLE9BQUEsU0FDQSxRQUFBLElBQUEsR0FBQSxhQUNBLEtBQUEsVUFFQSxRQUFBLElBQUEsa0JBQUEsR0FBQSxPQUFBLFVBQUEsU0FBQSxVQUdBLFFBQUEsT0FBQSxnQkFDQSxTQUFBLFFBQ0EsS0FBQSxRQUNBLE9BQUEsUUFBQSxRQVFBLE9BRkEsU0FBQSxJQUFBLHVCQUFBLEdBQUEsT0FBQSxVQUFBLGlCQUFBLE1BRUEsT0FBQSxRQUFBLFVBSUEsT0FBQSxRQUtBLGVBQUEsTUFBQSxPQUFBLFVBQUEsa0JBQUEsRUFLQSxTQUFBLEdBQUEsV0FBQSxXQUNBLGlCQUNBLHVCQzVIQSxRQUFBLE9BQUEsd0JBQ0EsUUFBQSxxQkFBQSxvQkFDQSxTQUFBLG1CQUFBLG1CQUNBLG1CQUFBLFVBQUEsS0FHQSxrQkFBQSxXQUFBLE1BR0EsUUFBQSxxQkFBQSxTQUFBLG9CQUVBLG1CQUFBLHNCQUNBLE9BQUEsMEJBQ0EsT0FBQSxVQUdBLG1CQUFBLGtCQUFBLE1BQ0EsbUJBQUEsa0JBQ0EsbUJBQUEscUNBRUEsUUFBQSxnQkFBQSxTQUFBLGVBQ0EsY0FBQSxpQkFBQSxRQ3JCQSxRQUFBLE9BQUEsNEJBQ0EsVUFBQSxpQkFBQSxRQUFBLGlCQUFBLFdBQUEsU0FBQSxNQUFBLGVBQUEsVUFDQSxNQUFBLFVBQUEsTUFBQSxRQUFBLE9BQ0EsR0FBQSxjQUFBLE1BQUEsYUFFQSxPQUFBLElBQUEsY0FBQSxNQUFBLGlCQUFBLFFBQUEsU0FBQSxVQUNBLEdBQUEsVUFBQSxFQUFBLFVBQUEsS0FBQSxVQUFBLFVBQ0EsU0FBQSxLQUFBLFVBQ0EsU0FBQSxVQUFBLGFDUkEsUUFBQSxPQUFBLDBCQUNBLFFBQUEsdUJBQUEsYUFBQSxRQUFBLFNBQUEsV0FBQSxPQUdBLFFBQUEscUJBQUEsUUFBQSxNQUNBLFlBQUEsS0FDQSxNQUFBLGtCQUFBLFNBQ0EsU0FBQSxLQUNBLE1BQUEsZUFBQSxTQUNBLFNBQUEsS0FDQSxNQUFBLGVBQUEsU0FFQSxNQUFBLGdCQUFBLFNBVkEsR0FBQSxxQkF5QkEsT0FWQSxZQUFBLElBQUEsc0JBQUEsV0FDQSxLQUFBLGtCQUFBLE9BQUEsR0FBQSxDQUNBLEdBQUEsTUFBQSxrQkFBQSxPQUNBLE9BQ0Esb0JBQUEsS0FBQSxRQUFBLEtBQUEsVUFPQSxhQUFBLFNBQUEsUUFBQSxNQUNBLGtCQUFBLE1BQUEsUUFBQSxRQUFBLEtBQUEsTUFBQSxjQzdCQSxRQUFBLE9BQUEscUJBQUEsZUFDQSxRQUFBLFFBQUEsWUFBQSxzQkFBQSxTQUFBLFdBQ0EsR0FBQSxLQUFBLFVBQUEsOERBQUEsR0FBQSxRQUNBLE9BQUEsT0FBQSxNQUFBLFVBQUEsU0FBQSxJQUdBLFFBQ0EsTUFBQSxTQUFBLFNBQUEsV0FBQSxVQUNBLE1BQUEsS0FBQSxPQUFBLEdBQUEsU0FBQSxLQUFBLFdBQUEsS0FBQSxTQUFBLEtBQUEsWUFBQSxjQ1JBLFFBQUEsT0FBQSwyQkFDQSxTQUFBLG9CQUNBLFNBQUEsTUFHQSxRQUFBLGlCQUNBLFNBQUEsZ0JBQ0EsZUFDQSxNQUFBLFFBQ0EsSUFBQSxJQUNBLFlBQUEsRUFDQSxTQUFBLGVBRUEsTUFBQSxjQUNBLElBQUEsR0FDQSxXQUFBLHFCQUNBLFlBQUEsd0NBQ0EsU0FDQSxlQUFBLFFBQUEsbUJBQUEsU0FBQSxNQUFBLGtCQUNBLE1BQUEsT0FBQSxNQUFBLEVBQUEsaUJBQUEsZUFJQSxNQUFBLGFBQ0EsSUFBQSxZQUNBLFdBQUEscUJBQ0EsWUFBQSx3Q0FDQSxTQUNBLGVBQUEsT0FBQSxtQkFBQSxlQUFBLFNBQUEsS0FBQSxrQkFDQSxNQUFBLE1BQUEsTUFBQSxJQUFBLEVBQUEsaUJBQUEsZUFJQSxNQUFBLGFBQ0EsSUFBQSx1Q0FDQSxXQUFBLHFCQUNBLFlBQUEsd0NBQ0EsU0FDQSxlQUFBLFFBQUEsZUFBQSxTQUFBLE1BQUEsY0FDQSxNQUFBLE9BQUEsTUFBQSxhQUFBLFdBQUEsRUFBQSxhQUFBLGVBSUEsTUFBQSxZQUNBLElBQUEsV0FDQSxXQUFBLG9CQUNBLFlBQUEseUNBRUEsTUFBQSxhQUNBLElBQUEsb0JBQ0EsV0FBQSxxQkFDQSxZQUFBLHdDQUNBLFNBQ0EsYUFBQSxRQUFBLGVBQUEsU0FBQSxNQUFBLGNBQ0EsTUFBQSxjQUFBLE9BQ0EsTUFBQSxJQUFBLGFBQUEsUUFFQSxVQUlBLE1BQUEsZUFDQSxJQUFBLDBEQUNBLFdBQUEseUJBQ0EsWUFBQSwrQ0FDQSxTQUNBLFlBQUEsZUFBQSxTQUFBLGNBQ0EsTUFBQSxjQUFBLGFBRUEsZUFBQSxTQUFBLGVBQUEsU0FBQSxPQUFBLGNBQ0EsTUFBQSxjQUFBLFdBQ0EsT0FBQSxpQkFBQSxhQUFBLFdBQUEsYUFBQSxXQUFBLEVBQUEsYUFBQSxVQUdBLFVBSUEsTUFBQSxhQUNBLElBQUEsZUFDQSxXQUFBLHFCQUNBLFlBQUEsd0NBQ0EsU0FDQSxZQUFBLFFBQUEsZUFBQSxTQUFBLE1BQUEsY0FDQSxNQUFBLGNBQUEsT0FDQSxNQUFBLElBQUEsYUFBQSxRQUVBLGFBTUEsV0FBQSxzQkFBQSxTQUFBLFNBQUEsZ0JBQUEsbUJBQ0EsU0FBQSxPQUFBLE9BQUEsY0FBQSxrQkFDQSxRQUFBLElBQUEsd0JBQ0EsT0FBQSxNQUFBLGNBQUEsUUFDQSxRQUFBLElBQUEsZUFDQSxRQUFBLElBQUEsY0FBQSxlQUNBLFFBQUEsSUFBQSxpQkFBQSxVQUNBLE9BQUEsWUFDQSxZQUFBLGNBQUEsT0FBQSxFQUNBLGFBQUEsaUJBQUEsU0FDQSxXQUFBLGNBQUEsZUFHQSxPQUFBLFFBQUEsV0FDQSxPQUFBLEdBQUEsYUFHQSxPQUFBLFlBQUEsU0FBQSxlQUNBLE9BQUEsR0FBQSxhQUNBLFdBQUEsY0FBQSxTQUFBLGlCQUFBLFdBQ0EsUUFBQSxFQUFBLFNBQUEsRUFBQSxRQUFBLFFBSUEsV0FBQSxzQkFBQSxTQUFBLFNBQUEsZ0JBQUEsbUJBQ0EsU0FBQSxPQUFBLE9BQUEsY0FBQSxrQkFDQSxFQUFBLGVBQUEsT0FBQSxLQUFBLE9BQ0EsWUFBQSxXQUNBLE1BQUEsR0FDQSxTQUFBLE9BR0EsU0FBQSxJQUFBLDRCQUNBLElBQUEsa0JBQUEsR0FDQSxVQUFBLHlCQUNBLEdBQUEsa0JBQUEsUUFDQSxNQUNBLE1BQ0EsSUFBQSxTQUFBLE1BQ0EsTUFBQSxNQUFBLEtBQUEsR0FDQSxVQUFBLG9DQUNBLFVBQUEsYUFBQSxLQUFBLEdBQUEsMEJBRUEsV0FBQSxTQUFBLE1BQ0EsR0FBQSxTQVdBLE9BVkEsR0FBQSxLQUFBLEtBQUEsTUFBQSxNQUFBLFFBQUEsU0FBQSxFQUFBLE1BQ0EsR0FBQSxRQUNBLE1BQUEsR0FBQSxLQUFBLE9BQUEsV0FBQSxpQkFBQSxNQUNBLEtBQUEsTUFBQSxLQUFBLEtBQUEsT0FBQSxXQUFBLHFCQUFBLE9BQ0EsS0FBQSxLQUFBLEtBQUEsT0FBQSxXQUFBLGFBQUEsTUFDQSxlQUFBLEtBQUEsT0FBQSxXQUFBLHFCQUFBLFFBQUEsS0FBQSxVQUFBLEdBQ0EsTUFBQSxLQUFBLFFBSUEsS0FBQSxVQUFBLFFBRUEsS0FBQSxTQUFBLE1BRUEsTUFEQSxTQUFBLElBQUEsT0FDQSxHQUFBLEtBQUEsR0FBQSxLQUFBLFVBTUEsRUFBQSxrQkFBQSxHQUFBLHFCQUFBLFNBQUEsRUFBQSxNQUVBLEdBREEsUUFBQSxJQUFBLFlBQUEsS0FBQSxLQUFBLEtBQUEsTUFBQSxLQUFBLEtBQUEsSUFDQSxlQUFBLEtBQUEsS0FBQSxLQUFBLEtBQ0EsT0FBQSxTQUFBLEtBQUEsS0FBQSxRQUNBLENBQ0EsR0FBQSxPQUFBLFNBQUEsS0FBQSxLQUFBLElBQ0EsU0FBQSxrQkFBQSxLQUNBLEdBQUEsUUFBQSxTQUFBLFNBQUEsVUFDQSxRQUFBLFNBQUEsTUFDQSxpQkFBQSxTQUFBLEtBQUEsWUFDQSxPQUFBLFNBQUEsSUFBQSxXQUVBLE9BQUEsR0FBQSxhQUFBLE9BQUEsUUFBQSxRQUFBLEVBQUEsU0FBQSxFQUFBLFFBQUEsU0FNQSxPQUFBLFNBQUEsU0FBQSxTQUFBLFVBQ0EsUUFBQSxJQUFBLDZCQUVBLEVBQUEsV0FBQSxPQUFBLGFBQ0EsSUFBQSxjQUdBLFNBQUEsU0FBQSxTQUNBLEVBQUEsU0FBQSxZQUNBLEdBQUEsdUJBQ0EsV0FBQSxXQUVBLFFBQUEsR0FBQSxNQUFBLEtBQUEsRUFBQSxHQUNBLE9BQUEsV0FJQSxNQUFBLEtBQUEsS0FBQSxPQUVBLGNBQ0EsY0FBQSxFQUNBLFNBQUEsRUFDQSxtQkFBQSxFQUNBLGVBQUEsRUFDQSxVQUFBLEVBQUEsSUFDQSxnQkFBQSxFQUNBLGNBQUEsV0FDQSxFQUFBLFFBQUEsS0FBQSxHQUFBLElBQUEsU0FHQSxhQUNBLGNBQUEsRUFDQSxTQUFBLEVBQ0EsbUJBQUEsRUFDQSxVQUFBLEVBQUEsSUFDQSxlQUFBLEVBQ0EsZUFBQSxFQUNBLGNBQUEsV0FDQSxFQUFBLFFBQUEsS0FBQSxHQUFBLElBQUEsU0FHQSxhQUNBLFlBQUEsR0FHQSxHQUFBLFNBRUEsZUFBQSxVQUFBLGFBQUEsR0FBQSx5QkFDQSxZQUFBLEtBQUEsT0FBQSxRQUFBLGNBQUEsV0FBQSxtQkFBQSxRQUFBLGdCQUNBLFFBQUEsS0FBQSxRQUFBLGNBQUEsV0FBQSxvQkFDQSxRQUFBLGlCQUFBLFNBQ0EsVUFDQSxLQUFBLEtBQUEsS0FBQSxFQUFBLE1BQUEsR0FBQSxRQUFBLDBDQUNBLEtBQUEsT0FBQSxNQUFBLE1BQUEsTUFBQSxJQUFBLFFBQUEsOENBQ0EsS0FBQSxRQUFBLE1BQUEsWUFBQSxNQUFBLElBQUEsUUFBQSxzQ0FDQSxLQUFBLGNBQUEsTUFBQSxXQUFBLE1BQUEsSUFBQSxRQUFBLDZDQUNBLEtBQUEsU0FBQSxNQUFBLFNBQUEsTUFBQSxJQUFBLFFBQUEsMkNBQ0EsS0FBQSxlQUFBLE1BQUEsZ0JBQUEsTUFBQSxJQUFBLFFBQUEsNENBQ0EsVUFBQSxPQUFBLGVBQUEsVUFBQSxTQUFBLFVBQUEsYUFDQSxTQUFBLE9BQ0EsY0FBQSxjQUVBLEtBQUEsV0FBQSxNQUFBLFVBQUEsTUFBQSxJQUFBLFFBQUEsZ0RBQ0EsS0FBQSxtQkFBQSxNQUFBLGlCQUFBLE1BQUEsSUFBQSxRQUFBLG9EQUNBLFVBQUEsT0FBQSxlQUFBLFVBQUEsU0FBQSxVQUFBLGFBQ0EsU0FBQSxPQUNBLGNBQUEsYUFHQSxTQUFBLElBQUEsVUFDQSxNQUFBLFdBQ0EsZUFBQSxTQUFBLEtBQUEsTUFBQSxXQUNBLFVBQ0EsV0FDQSxFQUFBLEtBQUEsU0FBQSxLQUFBLG1CQUFBLFNBQUEsRUFBQSxNQUVBLEdBQUEsR0FBQSxLQUFBLFFBQUEsQ0FDQSxHQUFBLFVBQUEsR0FDQSxNQUFBLFFBQUEsU0FBQSxTQUFBLEtBQUEsT0FDQSxJQUFBLFdBQUEsS0FBQSxLQUFBLE1BQUEsTUFBQSxLQUFBLEtBQUEsTUFBQSxTQUNBLE1BQUEsWUFBQSxTQUFBLE1BQUEsS0FBQSxXQUNBLElBQUEsRUFBQSxRQUFBLEtBQUEsTUFBQSxjQUNBLFNBQUEsUUFBQSxRQUFBLEtBQUEsTUFDQSxPQUFBLEtBQUEsS0FBQSxRQUVBLFdBQUEsS0FBQSxPQUFBLFNBQUEsZUFBQSxNQUFBLEtBQUEsS0FBQSxRQUNBLFFBQUEsS0FBQSxPQUNBLFNBQUEsU0FBQSxPQUNBLFNBQUEsY0FBQSxhQUVBLFFBQUEsS0FBQSxhQUdBLFFBQUEsSUFBQSxTQUNBLGdCQUFBLE9BQUEsT0FDQSxnQkFBQSxTQUFBLFFBQ0EsUUFBQSxJQUFBLGlCQUdBLEVBQUEsV0FBQSxRQUNBLElBQUEsZUFDQSxNQUFBLE1BQ0EsU0FBQSxPQUNBLEtBQUEsRUFDQSxTQUFBLFFBQ0EsV0FBQSxFQUNBLGFBQUEsRUFDQSxPQUFBLE9BQ0EsVUFBQSxJQUNBLE9BQUEsaUJBQUEsU0FFQSxrQkFBQSxTQUFBLFVBU0EsTUFSQSxnQkFBQSxVQUFBLE1BQ0EsU0FBQSxPQUdBLFNBQUEsS0FEQSxNQUFBLFNBQUEsTUFBQSxJQUFBLFNBQUEsS0FDQSxTQUFBLEtBQUEsSUFBQSxTQUFBLEtBRUEsVUFFQSxVQUVBLFlBQ0EsYUFBQSxFQUNBLEtBQUEsU0FBQSxNQUNBLE1BQUEsTUFBQSxRQUNBLEtBQUEsUUFFQSxLQUFBLFNBRUEsTUFBQSxTQUFBLE1BQ0EsTUFBQSxNQUFBLFlBRUEsS0FBQSxTQUFBLE1BQ0EsTUFBQSxNQUFBLE9BQUEsR0FFQSxRQUFBLFNBQUEsTUFDQSxNQUFBLE1BQUEsY0FDQSxLQUFBLGNBRUEsS0FBQSxXQUdBLFlBQUEsU0FBQSxLQUNBLEdBQUEsTUFBQSxJQUNBLGFBQUEsU0FDQSxDQUNBLEdBQUEsU0FBQSxFQUFBLFdBQUEsV0FBQSxJQUVBLElBREEsUUFBQSxJQUFBLFNBQUEsUUFBQSxNQUNBLGVBQUEsUUFBQSxLQUNBLE9BQUEsU0FBQSxTQUNBLENBQ0EsUUFBQSxJQUFBLGVBQUEsSUFDQSxJQUFBLE9BQUEsU0FBQSxLQUNBLFNBQUEsa0JBQUEsS0FDQSxHQUFBLFFBQUEsU0FBQSxTQUFBLFVBQ0EsUUFBQSxTQUFBLE1BQ0EsaUJBQUEsU0FBQSxLQUFBLFlBQ0EsT0FBQSxTQUFBLElBQUEsV0FFQSxPQUFBLEdBQUEsYUFBQSxPQUFBLFFBQUEsUUFBQSxFQUFBLFNBQUEsRUFBQSxRQUFBLFNBTUEsT0FBQSxFQUNBLGFBQUEsd0NBQ0EsTUFBQSxlQUNBLGFBQUEsV0FDQSxFQUFBLFlBQUEsTUFBQSxZQUFBLGNBQ0EsVUFDQSxLQUFBLFNBQUEsU0FFQSxFQUFBLFdBQUEsWUFBQSxRQUFBLEdBQUEsZUFFQSxJQUFBLFdBQ0EsRUFBQSxXQUFBLFlBQUEsTUFBQSxjQUVBLElBQUEsU0FBQSxTQUNBLEVBQUEsUUFBQSxTQUFBLHdCQUFBLEdBRUEsRUFBQSxXQUFBLFdBQUEsUUFBQSxHQUFBLGVBSUEsY0FBQSxTQUFBLE9BQ0EsR0FBQSxPQUFBLEVBQUEsTUFBQSxRQUFBLFFBQUEsYUFBQSxLQUFBLEtBU0EsT0FOQSxHQUFBLFFBQUEsS0FBQSxXQUFBLE9BQUEsT0FBQSxJQUFBLEdBQ0EsT0FBQSxPQUFBLElBQUEsRUFDQSxFQUFBLFFBQUEsS0FBQSxXQUFBLFlBQUEsU0FBQSxxQkFFQSxFQUFBLFFBQUEsV0FBQSxZQUFBLFlBQUEsc0JBRUEsUUFLQSxFQUFBLFdBQUEsUUFBQSxnQkFDQSxRQUFBLEVBQ0EsS0FBQSxFQUNBLE1BQUEsRUFDQSxLQUFBLEVBQ0EsU0FBQSxhQUtBLGdCQUFBLEVBQUEsb0JBQUEsRUFBQSxlQUFBLEtBS0EsT0FBQSxTQUFBLFFBRUEsV0FBQSxxQkFBQSxTQUFBLFNBQUEsUUFDQSxTQUFBLE9BQUEsT0FBQSxPQUNBLFFBQUEsSUFBQSxrQ0FDQSxPQUFBLFFBRUEsT0FBQSxTQUFBLFdBQ0EsR0FBQSxPQUFBLFNBQUEsT0FBQSxDQUNBLEdBQUEsV0FBQSxTQUFBLE9BQ0EsT0FBQSxHQUFBLGFBQUEsT0FBQSxNQUFBLEtBQUEsUUFBQSxFQUFBLFNBQUEsRUFBQSxRQUFBLElBRUEsUUFBQSxLQUFBLEtBQUEsS0FBQSxNQUFBLE9BQUEsS0FBQSxNQUNBLE1BQUEsS0FBQSxPQUFBLEtBQUEsZ0JBSUEsV0FBQSx3QkFBQSxTQUFBLGlCQUFBLFNBQUEsUUFBQSxjQUNBLFNBQUEsT0FBQSxlQUFBLE9BQUEsTUFBQSxhQUNBLE9BQUEsS0FBQSxZQUVBLE9BQUEsT0FBQSxXQUNBLGVBQUEsUUFBQSxXQUdBLE9BQUEsT0FBQSxXQUNBLEdBQUEsV0FBQSxXQUNBLGVBQUEsUUFDQSxPQUFBLEdBQUEsaUJBQUEsUUFBQSxFQUFBLFNBQUEsRUFBQSxRQUFBLElBRUEsT0FBQSxPQUFBLE9BQUEsS0FBQSxlQUdBLFdBQUEsc0JBQUEsU0FBQSxTQUFBLGNBQUEsUUFDQSxTQUFBLE9BQUEsT0FBQSxZQUFBLE9BQ0EsUUFBQSxJQUFBLGFBQ0EsT0FBQSxLQUFBLFlBQ0EsT0FBQSxLQUFBLEtBQUEsS0FBQSxVQUFBLE9BQUEsS0FBQSxNQUNBLE9BQUEsU0FBQSxXQUNBLEdBQUEsT0FBQSxTQUFBLE9BQUEsQ0FDQSxHQUFBLFdBQUEsU0FBQSxTQUNBLE9BQUEsR0FBQSxhQUFBLE9BQUEsUUFBQSxLQUFBLFFBQUEsRUFBQSxTQUFBLEVBQUEsUUFBQSxJQUVBLFFBQUEsS0FBQSxLQUFBLEtBQUEsTUFBQSxPQUFBLEtBQUEsTUFDQSxNQUFBLE9BQUEsT0FBQSxLQUFBLGdCQUlBLFdBQUEsb0JBQUEsU0FBQSxTQUFBLG1CQUNBLFNBQUEsT0FBQSxPQUFBLGtCQUVBLEdBQUEsd0JBQUEsRUFDQSx3QkFBQSxDQUVBLFFBQUEsYUFBQSx3QkFDQSxPQUFBLFdBQUEsR0FFQSxPQUFBLGdCQUFBLFdBQ0EsdUJBQUEsR0FHQSxPQUFBLGlCQUFBLFdBQ0EsdUJBQUEsR0FHQSxPQUFBLHlCQUFBLFdBQ0EsTUFBQSx3QkFDQSxPQUFBLFdBQUEsT0FBQSx5QkFDQSxHQUlBLEdBR0EsT0FBQSxPQUFBLFdBQ0EsT0FBQSxXQUFBLE9BQUEsd0JBQ0EsT0FBQSxhQUFBLHdCQUFBLE9BQUEsV0FBQSxRQUdBLE9BQUEsYUFBQSxFQUNBLE9BQUEsR0FBQSxlQUNBLFdBQUEsT0FBQSxXQUFBLFdBQUEsRUFBQSxTQUFBLGlCQUFBLFdBQ0EsUUFBQSxFQUFBLFNBQUEsRUFBQSxRQUFBLFNBTUEsV0FBQSwwQkFBQSxTQUFBLFNBQUEsbUJBQUEsYUFBQSxnQkFDQSxTQUFBLE9BQUEsT0FBQSxpQkFBQSxXQUFBLGVBQ0EsUUFBQSxJQUFBLGtDQUNBLE9BQUEsTUFBQSxjQUFBLFFBRUEsT0FBQSxZQUNBLFlBQUEsY0FBQSxPQUFBLEVBQ0EsYUFBQSxpQkFBQSxTQUNBLFdBQUEsY0FBQSxlQUdBLE9BQUEsWUFBQSxTQUFBLGVBQ0EsT0FBQSxHQUFBLGVBQ0EsV0FBQSxXQUFBLFdBQUEsY0FBQSxTQUFBLGlCQUFBLFdBQ0EsUUFBQSxFQUFBLFNBQUEsRUFBQSxRQUFBLFFBSUEsV0FBQSxzQkFBQSxTQUFBLFNBQUEsU0FBQSxhQUNBLFNBQUEsT0FBQSxPQUFBLE9BQUEsWUFDQSxRQUFBLElBQUEsbUNBQ0EsT0FBQSxLQUFBLFdBRUEsT0FBQSxhQUFBLFdBQ0EsT0FBQSxHQUFBLGFBQUEsT0FBQSxPQUFBLEtBQUEsS0FBQSxRQUFBLEVBQUEsU0FBQSxFQUFBLFFBQUEsS0FHQSxPQUFBLGlCQUFBLFdBQ0EsT0FBQSxNQUNBLFlBQUEsZ0RBQ0EsV0FBQSx1QkFDQSxTQUNBLFlBQUEsV0FDQSxNQUFBLFFBQUEsYUNsZ0JBLFFBQUEsT0FBQSxxQkFBQSxlQUNBLFFBQUEsU0FBQSxZQUFBLHNCQUFBLFNBQUEsVUFBQSxxQkFDQSxHQUFBLEtBQUEsVUFBQSxpQkFBQSxHQUFBLFFBQ0EsT0FBQSxPQUFBLE1BQUEsVUFBQSxTQUFBLEdBQ0EsS0FBQSxPQUFBLE9BQ0EsTUFBQSxPQUFBLFFBQ0EsUUFBQSxPQUFBLFFBR0EsUUFDQSxTQUFBLFNBQUEsS0FBQSxpQkFDQSxNQUFBLEtBQUEsT0FBQSxLQUFBLFdBQ0Esb0JBQUEsYUFBQSxvQ0FBQSxXQUNBLHFCQUdBLE1BQUEsU0FBQSxXQUFBLFVBQ0EsTUFBQSxLQUFBLE9BQUEsS0FBQSxXQUFBLEtBQUEsU0FBQSxLQUFBLFlBQUEsVUFFQSxJQUFBLFNBQUEsUUFDQSxNQUFBLEtBQUEsS0FBQSxHQUFBLFNBQUEsVUFFQSxLQUFBLFNBQUEsS0FBQSxpQkFDQSxJQUFBLEtBQUEsS0FBQSxTQUFBLE9BQ0Esb0JBQUEsYUFBQSxpQ0FBQSxXQUNBLGdCQUFBLFVBR0EsT0FBQSxTQUFBLEtBQUEsaUJBQ0EsSUFBQSxPQUFBLEtBQUEsU0FBQSxTQUNBLG9CQUFBLGFBQUEsb0NBQUEsV0FDQSxnQkFBQSxnQkMvQkEsUUFBQSxPQUFBLFFBQ0EsdUJBRUEsUUFDQSxnQkFBQSxxQkFDQSxTQUFBLGNBQUEsMEJBQ0EsZUFBQSxTQUFBLFFBQUEsT0FBQSxvQkFDQSxtQkFBQSxTQUFBLFNBQUEsT0FBQSxTQUFBLEtBQUEsUUFDQSxZQUNBLDJCQUtBLFdBQUEsNEJBQ0EsU0FBQSxRQUFBLFVBQUEsVUFDQSxTQUFBLFFBQ0EsT0FBQSxTQUNBLElBQUEsUUFLQSxXQUFBLHlCQUNBLFNBQUEsUUFDQSxTQUFBLE9BQUEsT0FDQSxHQUNBLE9BREEsS0FBQSxPQUFBLElBRUEsTUFBQSxLQUNBLEtBQUEsT0FBQSxXQUNBLE1BQUEsUUFFQSxLQUFBLFNBQUEsV0FFQSxNQURBLE9BQUEsVUFDQSxPQUNBLElBQUEsS0FBQSxVQUNBLE9BQUEsS0FBQSxhQUNBLEtBQ0EsV0FDQSxNQUFBLFdBQ0EsT0FBQSxNQUFBLE9BRUEsV0FDQSxNQUFBLGVBSUEsS0FBQSxTQUFBLEtBQUEsU0FDQSxLQUFBLFFBQUEsV0FDQSxPQUFBLE1BQUEsV0NqREEsUUFBQSxPQUFBLHVCQUFBLGVBQ0EsUUFBQSxVQUFBLFlBQUEsU0FBQSxXQUNBLEdBQUEsS0FBQSxVQUFBLHVCQUNBLE9BQUEsT0FBQSxNQUFBLFNBQUEsSUFHQSxRQUNBLGlCQUFBLFNBQUEsV0FBQSxXQUFBLFVBQ0EsTUFBQSxLQUFBLE9BQUEsS0FBQSxXQUFBLFdBQUEsV0FBQSxLQUFBLFNBQUEsS0FBQSxZQUFBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBBcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJywgW1xuICAgICduZ0xvY2FsZScsXG4gICAgJ25nQ29va2llcycsXG4gICAgJ25nUmVzb3VyY2UnLFxuICAgICduZ1Nhbml0aXplJyxcbiAgICAncGFzY2FscHJlY2h0LnRyYW5zbGF0ZScsXG4gICAgJ3VpLmJvb3RzdHJhcCcsXG4gICAgJ3VpLnJvdXRlcicsXG4gICAgJ3VpLnV0aWxzJyxcbiAgICAnYW5ndWxhci1ncm93bCcsXG4gICAgJ2FuZ3VsYXJNb21lbnQnLFxuICAgICdhbmd1bGFyVXRpbHMuZGlyZWN0aXZlcy5kaXJQYWdpbmF0aW9uJyxcbiAgICBcbiAgICAnYW5ndWxhci1qcWdyaWQnLFxuXG4gICAgLy9QYXJ0aWFsc1xuICAgICdhcHAucGFydGlhbHMnLFxuXG4gICAgLy9Db21tb25cbiAgICAnYXBwLmNvbW1vbi5jb25maWcnLCAnYXBwLmNvbW1vbi5kaXJlY3RpdmVzJywgJ2FwcC5jb21tb24uc2VydmljZXMnLFxuXG4gICAgLy9TZWFyY2hcbiAgICAnYXBwLnNlYXJjaC5zZXJ2aWNlcycsXG5cbiAgICAvL1RvZG9cbiAgICAnYXBwLnRvZG8uY29udHJvbGxlcnMnLCAnYXBwLnRvZG8uc2VydmljZXMnLFxuICAgIFxuICAgICdhcHAuY21pcy5zZXJ2aWNlcydcblxuXSk7XG5cbiIsIi8qXHJcbiogVGhlIE1JVCBMaWNlbnNlIChNSVQpXHJcbipcclxuKiBDb3B5cmlnaHQgKGMpIDIwMTYgRGV2ZWxlciBkZXZnaW5pZVxyXG4qXHJcbiogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxyXG4qIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcclxuKiBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXHJcbiogdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxyXG4qIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xyXG4qIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XHJcbipcclxuKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBhbGxcclxuKiBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxyXG4qXHJcbiogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxyXG4qIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxyXG4qIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxyXG4qIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcclxuKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxyXG4qIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFXHJcbiogU09GVFdBUkUuXHJcbiovXHJcblxyXG4vKiBnbG9iYWwgJCAqL1xyXG4vKiBnbG9iYWwgYW5ndWxhciAqL1xyXG4vKiBnbG9iYWwgalF1ZXJ5ICovXHJcblxyXG5hbmd1bGFyLm1vZHVsZSgnYW5ndWxhci1qcWdyaWQnLCBbXSkuZGlyZWN0aXZlKCdqcUdyaWQnLCBmdW5jdGlvbigpIHtcclxuICByZXR1cm4ge1xyXG4gICAgcmVzdHJpY3Q6ICdFQScsXHJcbiAgICB0ZW1wbGF0ZTogJzx0YWJsZT48L3RhYmxlPicsXHJcbiAgICBzY29wZToge1xyXG4gICAgICBkYXRhc2V0OiAnPScsXHJcbiAgICAgIG9wdGlvbnM6ICc9JyxcclxuICAgICAgY2FsbGJhY2s6ICc9JyxcclxuICAgICAgcGFnZXI6ICc9J1xyXG4gICAgfSxcclxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyaWJ1dGVzKSB7XHJcbiAgICAgIHZhciBqcUdyaWQgPSBudWxsO1xyXG4gICAgICB2YXIgaGVpZ2h0ID0gYXR0cmlidXRlcy5oZWlnaHQgfHwgJzEwMCUnO1xyXG5cclxuICAgICAgdmFyIGluaXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgZ3JpZE9iajtcclxuXHJcbiAgICAgICAgaWYgKHNjb3BlLmRhdGFzZXQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgLy8gRXhjZXB0aW9uIHByb2Nlc3MgaWYgZGF0YXNldCBpcyBlbXB0eS5cclxuICAgICAgICAgIHJldHVybiBncmlkT2JqO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7fTtcclxuXHJcbiAgICAgICAgb3B0aW9ucy5kYXRhID0gc2NvcGUuZGF0YXNldDtcclxuXHJcbiAgICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKHRydWUsIG9wdGlvbnMsIHNjb3BlLm9wdGlvbnMpO1xyXG5cclxuICAgICAgICBvcHRpb25zLmhlaWdodCA9IGhlaWdodDtcclxuXHJcbiAgICAgICAgZ3JpZE9iaiA9ICQoZWxlbWVudC5jaGlsZHJlbigpWzBdKS5qcUdyaWQob3B0aW9ucyk7XHJcblxyXG4gICAgICAgIGlmIChzY29wZS5jYWxsYmFjaykge1xyXG4gICAgICAgICAgc2NvcGUuY2FsbGJhY2soZ3JpZE9iaik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZ3JpZE9iajtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vXHJcbiAgICAgIC8vIEV2ZW50c1xyXG4gICAgICAvL1xyXG4gICAgICAvLyBXaW5kb3cgUmVzaXplXHJcbiAgICAgICQod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHBhcmVudEVsZW1lbnQgPSBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudCkucGFyZW50KCk7XHJcbiAgICAgICAganFHcmlkLnNldEdyaWRXaWR0aChwYXJlbnRFbGVtZW50LndpZHRoKCkpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAqIFdhdGNoZXNcclxuICAgICAgKi9cclxuICAgICAgdmFyIG9uT3B0aW9uc0NoYW5nZWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBqcUdyaWQgPSBpbml0KCk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB2YXIgdW53YXRjaE9wdGlvbnMgPSBzY29wZS4kd2F0Y2goJ29wdGlvbnMnLCBvbk9wdGlvbnNDaGFuZ2VkLCB0cnVlKTtcclxuXHJcbiAgICAgIHZhciBvbkRhdGFzZXRDaGFuZ2VkID0gZnVuY3Rpb24oZGF0YXNldCkge1xyXG4gICAgICAgIHZhciBzdGFydERhdGFDaGFuZ2VkID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgaWYgKGpxR3JpZCkge1xyXG5cclxuICAgICAgICAgIGpxR3JpZC5qcUdyaWQoJ2NsZWFyR3JpZERhdGEnKTtcclxuICAgICAgICAgIC8vIC8vIEJ1Z2ZpeCA6IOqwseyLoCDtm4QgdW5kZWZpbmVkIO2WieydhCDsoJzqsbDtlZjquLAg7JyE7ZW0IGdyaWREYXRhIOq4uOydtOulvCDssrTtgawg7ZuEIOu5iOqwkiDtlaDri7lcclxuICAgICAgICAgIGlmKCBqcUdyaWQuZ2V0KDApLnAudHJlZUdyaWQpIHtcclxuICAgICAgICAgICAgdmFyIHBlcmZUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgICAgIGpxR3JpZC5nZXQoMCkuYWRkSlNPTkRhdGEoe1xyXG4gICAgICAgICAgICAgIHJvd3MgOiBkYXRhc2V0XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnYWRkSlNPTkRhdGEgOiAnLCBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHBlcmZUaW1lLCAnbXMnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBqcUdyaWQuanFHcmlkKCdzZXRHcmlkUGFyYW0nLCB7XHJcbiAgICAgICAgICAgICAgZGF0YXR5cGU6ICdsb2NhbCcsXHJcbiAgICAgICAgICAgICAgZGF0YTogZGF0YXNldCxcclxuICAgICAgICAgICAgICByb3dOdW06IGRhdGFzZXQubGVuZ3RoXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy9cclxuICAgICAgICAgIC8vIGpxR3JpZC50cmlnZ2VyKCdyZWxvYWRHcmlkJyk7XHJcblxyXG4gICAgICAgICAgY29uc29sZS5sb2coJ29uRGF0YXNldENoYW5nZWQgOiAnLCBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHN0YXJ0RGF0YUNoYW5nZWQsICdtcycpO1xyXG5cclxuICAgICAgICAgIHJldHVybiBqcUdyaWQudHJpZ2dlcigncmVsb2FkJyk7XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAganFHcmlkID0gaW5pdCgpO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB2YXIgdW53YXRjaERhdGFzZXQgPSBzY29wZS4kd2F0Y2goJ2RhdGFzZXQnLCBvbkRhdGFzZXRDaGFuZ2VkLCBmYWxzZSk7XHJcblxyXG4gICAgICAvKipcclxuICAgICAgKiBUZWFyIERvd25cclxuICAgICAgKi9cclxuICAgICAgZWxlbWVudC5vbignJGRlc3Ryb3knLCBmdW5jdGlvbiBvbkRlc3Ryb3koKSB7XHJcbiAgICAgICAgdW53YXRjaERhdGFzZXQoKTtcclxuICAgICAgICB1bndhdGNoT3B0aW9ucygpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICB9XHJcbiAgfTtcclxufSk7XHJcbiIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ2FwcC5jb21tb24uY29uZmlnJywgW10pXG4gICAgLmNvbmZpZyhbJyR1cmxSb3V0ZXJQcm92aWRlcicsICckbG9jYXRpb25Qcm92aWRlcicsXG4gICAgICAgIGZ1bmN0aW9uICgkdXJsUm91dGVyUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG4gICAgICAgICAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvJyk7XG5cbiAgICAgICAgICAgIC8vIFdpdGhvdXQgc2VydmVyIHNpZGUgc3VwcG9ydCBodG1sNSBtdXN0IGJlIGRpc2FibGVkLlxuICAgICAgICAgICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKGZhbHNlKTtcbiAgICAgICAgfVxuICAgIF0pXG4gICAgLmNvbmZpZyhbJyR0cmFuc2xhdGVQcm92aWRlcicsIGZ1bmN0aW9uICgkdHJhbnNsYXRlUHJvdmlkZXIpIHtcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBhbmd1bGFyLXRyYW5zbGF0ZVxuICAgICAgICAkdHJhbnNsYXRlUHJvdmlkZXIudXNlU3RhdGljRmlsZXNMb2FkZXIoe1xuICAgICAgICAgICAgcHJlZml4OiAnL2lhYWRtaW4vZnJvbnRlbmQvaTE4bi8nLFxuICAgICAgICAgICAgc3VmZml4OiAnLmpzb24nXG4gICAgICAgIH0pO1xuXG4gICAgICAgICR0cmFuc2xhdGVQcm92aWRlci5wcmVmZXJyZWRMYW5ndWFnZSgnZW4nKTtcbiAgICAgICAgJHRyYW5zbGF0ZVByb3ZpZGVyLnVzZUxvY2FsU3RvcmFnZSgpO1xuICAgICAgICAkdHJhbnNsYXRlUHJvdmlkZXIudXNlTWlzc2luZ1RyYW5zbGF0aW9uSGFuZGxlckxvZygpO1xuICAgIH1dKVxuICAgIC5jb25maWcoWydncm93bFByb3ZpZGVyJywgZnVuY3Rpb24gKGdyb3dsUHJvdmlkZXIpIHtcbiAgICAgICAgZ3Jvd2xQcm92aWRlci5nbG9iYWxUaW1lVG9MaXZlKDUwMDApO1xuICAgIH1dKTsiLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdhcHAuY29tbW9uLmRpcmVjdGl2ZXMnLCBbXSlcbiAgICAuZGlyZWN0aXZlKCdzdGF0aWNJbmNsdWRlJywgWyckaHR0cCcsICckdGVtcGxhdGVDYWNoZScsICckY29tcGlsZScsIGZ1bmN0aW9uICgkaHR0cCwgJHRlbXBsYXRlQ2FjaGUsICRjb21waWxlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZVBhdGggPSBhdHRycy5zdGF0aWNJbmNsdWRlO1xuXG4gICAgICAgICAgICAkaHR0cC5nZXQodGVtcGxhdGVQYXRoLCB7Y2FjaGU6ICR0ZW1wbGF0ZUNhY2hlfSkuc3VjY2VzcyhmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudHMgPSAkKCc8ZGl2Lz4nKS5odG1sKHJlc3BvbnNlKS5jb250ZW50cygpO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuaHRtbChjb250ZW50cyk7XG4gICAgICAgICAgICAgICAgJGNvbXBpbGUoY29udGVudHMpKHNjb3BlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgIH1dKTsiLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXIubW9kdWxlKCdhcHAuY29tbW9uLnNlcnZpY2VzJywgW10pXG4gICAgLnNlcnZpY2UoJ05vdGlmaWNhdGlvblNlcnZpY2UnLCBbJyRyb290U2NvcGUnLCAnZ3Jvd2wnLCBmdW5jdGlvbiAoJHJvb3RTY29wZSwgZ3Jvd2wpIHtcbiAgICAgICAgdmFyIGZsYXNoTWVzc2FnZVF1ZXVlID0gW107XG5cbiAgICAgICAgZnVuY3Rpb24gZGlzcGxheU5vdGlmaWNhdGlvbihtZXNzYWdlLCB0eXBlKSB7XG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ3N1Y2Nlc3MnKSB7XG4gICAgICAgICAgICAgICAgZ3Jvd2wuYWRkU3VjY2Vzc01lc3NhZ2UobWVzc2FnZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICd3YXJuJykge1xuICAgICAgICAgICAgICAgIGdyb3dsLmFkZFdhcm5NZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnaW5mbycpIHtcbiAgICAgICAgICAgICAgICBncm93bC5hZGRJbmZvTWVzc2FnZShtZXNzYWdlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZ3Jvd2wuYWRkRXJyb3JNZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gRGlzcGxheSBhbGwgZmxhc2ggbm90aWZpY2F0aW9ucyBhZnRlciBzdGF0ZSBoYXMgY2hhbmdlZFxuICAgICAgICAkcm9vdFNjb3BlLiRvbihcIiRzdGF0ZUNoYW5nZVN1Y2Nlc3NcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgd2hpbGUgKGZsYXNoTWVzc2FnZVF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGZsYXNoTWVzc2FnZVF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheU5vdGlmaWNhdGlvbihpdGVtLm1lc3NhZ2UsIGl0ZW0udHlwZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBQdWJsaWMgQVBJXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAnZmxhc2hNZXNzYWdlJzogZnVuY3Rpb24gKG1lc3NhZ2UsIHR5cGUpIHtcbiAgICAgICAgICAgICAgICBmbGFzaE1lc3NhZ2VRdWV1ZS5wdXNoKHttZXNzYWdlOiBtZXNzYWdlLCB0eXBlOiB0eXBlIHx8ICdpbmZvJ30pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1dKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ2FwcC5jbWlzLnNlcnZpY2VzJywgWyduZ1Jlc291cmNlJ10pXG4gICAgLmZhY3RvcnkoJ0NNSVMnLCBbJyRyZXNvdXJjZScsICdOb3RpZmljYXRpb25TZXJ2aWNlJywgZnVuY3Rpb24oJHJlc291cmNlLCBOb3RpZmljYXRpb25TZXJ2aWNlKSB7XG4gICAgICAgIHZhciBhcGkgPSAkcmVzb3VyY2UoJy9qb29xL2Jyb3dzZXIvdGVzdC9yb290P2NtaXNzZWxlY3Rvcj1jaGlsZHJlbiZvYmplY3RJZD06aWQnLCB7XCJpZFwiOiBcIkBpZFwifSwge1xuICAgICAgICAgICAgcXVlcnk6ICB7bWV0aG9kOiAnR0VUJywgcGFyYW1zOiB7fSwgaXNBcnJheTogZmFsc2V9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBxdWVyeTogZnVuY3Rpb24oZm9sZGVySWQsIHBhZ2VOdW1iZXIsIHBhZ2VTaXplKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFwaS5xdWVyeSh7aWQ6IGZvbGRlcklkLCBwYWdlOiBwYWdlTnVtYmVyLCBzaXplOiBwYWdlU2l6ZSwgc29ydDogJ0lELERFU0MnfSkuJHByb21pc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfV0pOyIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ2FwcC50b2RvLmNvbnRyb2xsZXJzJywgW10pXG4gICAgLmNvbnN0YW50KCdwYWdpbmF0aW9uQ29uZmlnJywge1xuICAgICAgICBwYWdlU2l6ZTogMjAwXG4gICAgfSlcbiAgICBcbiAgICAuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLFxuICAgICAgICBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcbiAgICAgICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgICAgICAgLnN0YXRlKCd0b2RvJywge1xuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvJyxcbiAgICAgICAgICAgICAgICAgICAgYWJzdHJhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnPHVpLXZpZXcvPidcbiAgICAgICAgICAgICAgICB9IClcbiAgICAgICAgICAgICAgICAuc3RhdGUoJ3RvZG8uaW5kZXgnLCB7XG4gICAgICAgICAgICAgICAgICAgIHVybDogJycsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdUb2RvTGlzdENvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2Zyb250ZW5kL3BhcnRpYWxzL3RvZG8vdG9kby1saXN0Lmh0bWwnLFxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICAgICAgICAgIFx0c2VhcmNoUmVzdWx0czogWydUb2RvcycsICdwYWdpbmF0aW9uQ29uZmlnJywgZnVuY3Rpb24oVG9kb3MsIHBhZ2luYXRpb25Db25maWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVG9kb3MucXVlcnkoMCwgcGFnaW5hdGlvbkNvbmZpZy5wYWdlU2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuc3RhdGUoJ3RvZG8udHJlZScsIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAndG9kby90cmVlJyxcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1RvZG9UcmVlQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnZnJvbnRlbmQvcGFydGlhbHMvdG9kby90b2RvLXRyZWUuaHRtbCcsXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAgICAgICAgICAgXHRzZWFyY2hSZXN1bHRzOiBbJ0NNSVMnLCAncGFnaW5hdGlvbkNvbmZpZycsICckc3RhdGVQYXJhbXMnLCBmdW5jdGlvbihDTUlTLCBwYWdpbmF0aW9uQ29uZmlnLCRzdGF0ZVBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBDTUlTLnF1ZXJ5KCcwJywwLCBwYWdpbmF0aW9uQ29uZmlnLnBhZ2VTaXplKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAuc3RhdGUoJ3RvZG8ucGFnZScsIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAndG9kby9wYWdlLzpwYWdlTnVtYmVyL3NpemUvOnBhZ2VTaXplJyxcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1RvZG9MaXN0Q29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnZnJvbnRlbmQvcGFydGlhbHMvdG9kby90b2RvLWxpc3QuaHRtbCcsXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAgICAgICAgICAgXHRzZWFyY2hSZXN1bHRzOiBbJ1RvZG9zJywgJyRzdGF0ZVBhcmFtcycsIGZ1bmN0aW9uKFRvZG9zLCAkc3RhdGVQYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVG9kb3MucXVlcnkoJHN0YXRlUGFyYW1zLnBhZ2VOdW1iZXIgLSAxLCAkc3RhdGVQYXJhbXMucGFnZVNpemUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnN0YXRlKCd0b2RvLmFkZCcsIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAndG9kby9hZGQnLFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnQWRkVG9kb0NvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2Zyb250ZW5kL3BhcnRpYWxzL3RvZG8vYWRkLXRvZG8uaHRtbCdcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5zdGF0ZSgndG9kby5lZGl0Jywge1xuICAgICAgICAgICAgICAgICAgICB1cmw6ICd0b2RvLzp0b2RvSWQvZWRpdCcsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdFZGl0VG9kb0NvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2Zyb250ZW5kL3BhcnRpYWxzL3RvZG8vZWRpdC10b2RvLmh0bWwnLFxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkVG9kbzogWydUb2RvcycsICckc3RhdGVQYXJhbXMnLCBmdW5jdGlvbihUb2RvcywgJHN0YXRlUGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzdGF0ZVBhcmFtcy50b2RvSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFRvZG9zLmdldCgkc3RhdGVQYXJhbXMudG9kb0lkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuc3RhdGUoJ3RvZG8uc2VhcmNoJywge1xuICAgICAgICAgICAgICAgICAgICB1cmw6ICd0b2RvL3NlYXJjaC86c2VhcmNoVGVybS9wYWdlLzpwYWdlTnVtYmVyL3NpemUvOnBhZ2VTaXplJyxcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1NlYXJjaFJlc3VsdENvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2Zyb250ZW5kL3BhcnRpYWxzL3NlYXJjaC9zZWFyY2gtcmVzdWx0cy5odG1sJyxcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoVGVybTogWyckc3RhdGVQYXJhbXMnLCBmdW5jdGlvbigkc3RhdGVQYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHN0YXRlUGFyYW1zLnNlYXJjaFRlcm07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaFJlc3VsdHM6IFsnU2VhcmNoJywgJyRzdGF0ZVBhcmFtcycsIGZ1bmN0aW9uKFNlYXJjaCwgJHN0YXRlUGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzdGF0ZVBhcmFtcy5zZWFyY2hUZXJtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBTZWFyY2guZmluZEJ5U2VhcmNoVGVybSgkc3RhdGVQYXJhbXMuc2VhcmNoVGVybSwgJHN0YXRlUGFyYW1zLnBhZ2VOdW1iZXIgLSAxLCAkc3RhdGVQYXJhbXMucGFnZVNpemUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnN0YXRlKCd0b2RvLnZpZXcnLCB7XG4gICAgICAgICAgICAgICAgICAgIHVybDogJ3RvZG8vOnRvZG9JZCcsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdWaWV3VG9kb0NvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2Zyb250ZW5kL3BhcnRpYWxzL3RvZG8vdmlldy10b2RvLmh0bWwnLFxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3ZWRUb2RvOiBbJ1RvZG9zJywgJyRzdGF0ZVBhcmFtcycsIGZ1bmN0aW9uKFRvZG9zLCAkc3RhdGVQYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHN0YXRlUGFyYW1zLnRvZG9JZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVG9kb3MuZ2V0KCRzdGF0ZVBhcmFtcy50b2RvSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIF0pXG4gICAgLmNvbnRyb2xsZXIoJ1RvZG9MaXN0Q29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRzdGF0ZScsICdzZWFyY2hSZXN1bHRzJywncGFnaW5hdGlvbkNvbmZpZycsXG4gICAgICAgIGZ1bmN0aW9uKCRzY29wZSwgJHN0YXRlLCBzZWFyY2hSZXN1bHRzLCBwYWdpbmF0aW9uQ29uZmlnKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdSZW5kZXJpbmcgZG9jdW1lbnRzLicpO1xuICAgICAgICAkc2NvcGUudG9kb3MgPSBzZWFyY2hSZXN1bHRzLmNvbnRlbnQ7XG4gICAgICAgIGNvbnNvbGUubG9nKHNlYXJjaFJlc3VsdHMpO1xuICAgICAgICBjb25zb2xlLmxvZyhzZWFyY2hSZXN1bHRzLnRvdGFsRWxlbWVudHMpO1xuICAgICAgICBjb25zb2xlLmxvZyhwYWdpbmF0aW9uQ29uZmlnLnBhZ2VTaXplKTtcbiAgICAgICAgJHNjb3BlLnBhZ2luYXRpb24gPSB7XG4gICAgICAgICAgICBjdXJyZW50UGFnZTogc2VhcmNoUmVzdWx0cy5udW1iZXIgKyAxLFxuICAgICAgICAgICAgaXRlbXNQZXJQYWdlOiBwYWdpbmF0aW9uQ29uZmlnLnBhZ2VTaXplLFxuICAgICAgICAgICAgdG90YWxJdGVtczogc2VhcmNoUmVzdWx0cy50b3RhbEVsZW1lbnRzXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAkc2NvcGUuYWRkVG9kbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJHN0YXRlLmdvKCd0b2RvLmFkZCcpO1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgJHNjb3BlLnBhZ2VDaGFuZ2VkID0gZnVuY3Rpb24obmV3UGFnZU51bWJlcikge1xuICAgICAgICAgICAgJHN0YXRlLmdvKCd0b2RvLnBhZ2UnLFxuICAgICAgICAgICAgICAgIHtwYWdlTnVtYmVyOiBuZXdQYWdlTnVtYmVyLCBwYWdlU2l6ZTogcGFnaW5hdGlvbkNvbmZpZy5wYWdlU2l6ZX0sXG4gICAgICAgICAgICAgICAge3JlbG9hZDogdHJ1ZSwgaW5oZXJpdDogdHJ1ZSwgbm90aWZ5OiB0cnVlfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfTtcbiAgICB9XSlcbiAgICAuY29udHJvbGxlcignVG9kb1RyZWVDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJHN0YXRlJywgJ3NlYXJjaFJlc3VsdHMnLCdwYWdpbmF0aW9uQ29uZmlnJyxcbiAgICAgICAgZnVuY3Rpb24oJHNjb3BlLCAkc3RhdGUsIHNlYXJjaFJlc3VsdHMsIHBhZ2luYXRpb25Db25maWcpIHtcbiAgICBcdHZhciBzcGxpdHRlciA9ICQoJyNNeVNwbGl0dGVyJykuaGVpZ2h0KDYwMCkuc3BsaXQoe1xuICAgIFx0ICAgIG9yaWVudGF0aW9uOiAndmVydGljYWwnLFxuICAgIFx0ICAgIGxpbWl0OiAxMCxcbiAgICBcdCAgICBwb3NpdGlvbjogJzIwJScgLy8gaWYgdGhlcmUgaXMgbm8gcGVyY2VudGFnZSBpdCBpbnRlcnByZXQgaXQgYXMgcGl4ZWxzXG4gICAgXHRcdFxuICAgIFx0fSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdSZW5kZXJpbmcgZG9jdW1lbnRzIHRyZWUuJyk7XG4gICAgICAgIHZhciBjdXJyZW50RGVmRm9ybUlkPScnO1xuICAgICAgICB2YXIgY21pc19yb290PSBcIi9qb29xL2Jyb3dzZXIvdGVzdC9yb290XCI7XG5cdFx0ICAgICQoJyN0cmVlY29udGFpbmVyJykuanN0cmVlKHtcblx0XHQgICAgJ2NvcmUnIDoge1xuXHRcdCAgICAgICdkYXRhJyA6IHtcblx0XHQgICAgICAgIFwidXJsXCIgOiBmdW5jdGlvbiAobm9kZSkge1xuXHRcdFx0XHRcdCAgcmV0dXJuIG5vZGUuaWQgPT09ICcjJyA/XG5cdFx0XHRcdFx0XHRjbWlzX3Jvb3QrXCI/b2JqZWN0SWQ9MCZjbWlzc2VsZWN0b3I9Y2hpbGRyZW5cIiA6XG5cdFx0XHRcdFx0XHRjbWlzX3Jvb3QrXCI/b2JqZWN0SWQ9XCIrbm9kZS5pZCtcIiZjbWlzc2VsZWN0b3I9Y2hpbGRyZW5cIjtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcImRhdGFGaWx0ZXJcIiA6IGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdFx0dmFyIG5vZGVzID0gW107XG5cdFx0XHRcdFx0JC5lYWNoKEpTT04ucGFyc2UoZGF0YSkub2JqZWN0cywgZnVuY3Rpb24oaSxpdGVtKXtcblx0XHRcdFx0XHRcdHZhciBub2RlID0ge307XG5cdFx0XHRcdFx0XHRub2RlLmlkPSBpdGVtLm9iamVjdC5wcm9wZXJ0aWVzW1wiY21pczpvYmplY3RJZFwiXS52YWx1ZTtcblx0XHRcdFx0XHRcdG5vZGUuZGF0YSA9IHtcInR5cGVcIjogaXRlbS5vYmplY3QucHJvcGVydGllc1tcImNtaXM6b2JqZWN0VHlwZUlkXCJdLnZhbHVlfTtcblx0XHRcdFx0XHRcdG5vZGUudGV4dD1pdGVtLm9iamVjdC5wcm9wZXJ0aWVzW1wiY21pczpuYW1lXCJdLnZhbHVlO1xuXHRcdFx0XHRcdFx0aWYgKGl0ZW0ub2JqZWN0LnByb3BlcnRpZXNbXCJjbWlzOm9iamVjdFR5cGVJZFwiXS52YWx1ZT09XCJjbWlzOmZvbGRlclwiKXtub2RlLmNoaWxkcmVuPXRydWV9XG5cdFx0XHRcdFx0XHRub2Rlcy5wdXNoKG5vZGUpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHQgIHJldHVybiBKU09OLnN0cmluZ2lmeShub2Rlcyk7XG5cdFx0XHRcdCAgIH0sXG5cdFx0ICAgICAgICBcImRhdGFcIiA6IGZ1bmN0aW9uIChub2RlKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2cobm9kZSApO1xuXHRcdCAgICAgICAgICByZXR1cm4geyBcImlkXCIgOiBub2RlLmlkLCBcInRleHRcIjogXCIxXCIgfTtcblx0XHQgICAgICAgIH1cblx0XHQgICAgICB9XG5cdFx0ICAgIH1cblx0XHQgIH0pO1xuXHRcdCAgLy8kKFwiI3RyZWVjb250YWluZXJcIikuanN0cmVlKCdjcmVhdGVfbm9kZScsICcjJywgeydpZCcgOiAnMCcsICd0ZXh0JyA6ICdSb290IGZvbGRlcid9LCAnbGFzdCcpO1xuXHRcdCAgJCgnI3RyZWVjb250YWluZXInKS5vbihcInNlbGVjdF9ub2RlLmpzdHJlZVwiLCBmdW5jdGlvbiAoZSwgZGF0YSkge1xuXHRcdFx0ICBjb25zb2xlLmxvZyhcIm5vZGVfaWQ6IFwiKyBkYXRhLm5vZGUudHlwZSArIFwiIC0gXCIgKyBkYXRhLm5vZGUuaWQpOyBcblx0XHRcdCAgaWYgKGRhdGEubm9kZS5kYXRhLnR5cGU9PVwiY21pczpmb2xkZXJcIil7XG5cdFx0XHRcdCRzY29wZS5sb2FkR3JpZChkYXRhLm5vZGUuaWQpO1xuXHRcdFx0ICB9ZWxzZXtcblx0XHRcdFx0dmFyIGRvY2lkID0gcGFyc2VJbnQoZGF0YS5ub2RlLmlkKTtcblx0XHRcdFx0dmFyIHZpZXdzVXJsID0gJy9qb29xL2FwaS9kb2NzLycrZG9jaWQ7XG5cdFx0XHRcdCQuZ2V0SlNPTih2aWV3c1VybCwgZnVuY3Rpb24odmlld2RhdGEpIHtcblx0XHRcdFx0XHRpZiAodmlld2RhdGEudHlwZT09J3ZpZXcnKXtcblx0XHRcdFx0XHRcdGN1cnJlbnREZWZGb3JtSWQ9dmlld2RhdGEuZGF0YS5kZWZhdWx0Rm9ybTtcblx0XHRcdFx0XHRcdCRzY29wZS5sb2FkR3JpZCgnMCcsdmlld2RhdGEpO1xuXHRcdFx0XHRcdH1lbHNle1xuXHRcdFx0XHRcdFx0JHN0YXRlLmdvKCd0b2RvLnZpZXcnLCB7dG9kb0lkOiBkb2NpZH0sIHsgcmVsb2FkOiB0cnVlLCBpbmhlcml0OiB0cnVlLCBub3RpZnk6IHRydWUgfSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdCAgfVxuXHRcdFx0ICBcblx0XHRcdH0pO1xuXHQkc2NvcGUubG9hZEdyaWQgPSBmdW5jdGlvbihmb2xkZXJJZCx2aWV3ZGF0YSkge1xuICAgICAgICBjb25zb2xlLmxvZygnUmVuZGVyaW5nIGRvY3VtZW50cyBncmlkLicpO1xuICAgICAgICBcbiAgICBcdCQoXCIjanFHcmlkXCIpLmpxR3JpZCgnR3JpZFVubG9hZCcpO1xuICAgIFx0dmFyIGRhdGVPcHRpb25zPSB7XG4gICAgXHRcdFx0Ly8gZGF0YUluaXQgaXMgdGhlIGNsaWVudC1zaWRlIGV2ZW50IHRoYXQgZmlyZXMgdXBvbiBpbml0aWFsaXppbmcgdGhlIHRvb2xiYXIgc2VhcmNoIGZpZWxkIGZvciBhIGNvbHVtblxuICAgIFx0XHRcdC8vIHVzZSBpdCB0byBwbGFjZSBhIHRoaXJkIHBhcnR5IGNvbnRyb2wgdG8gY3VzdG9taXplIHRoZSB0b29sYmFyXG4gICAgXHRcdFx0ZGF0YUluaXQ6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgXHRcdFx0XHQkKGVsZW1lbnQpLmRhdGVwaWNrZXIoe1xuICAgIFx0XHRcdFx0XHRpZDogJ29yZGVyRGF0ZV9kYXRlUGlja2VyJyxcbiAgICBcdFx0XHRcdFx0ZGF0ZUZvcm1hdDogJ3l5LW1tLWRkJyxcbiAgICBcdFx0XHRcdFx0Ly9taW5EYXRlOiBuZXcgRGF0ZSgyMDEwLCAwLCAxKSxcbiAgICBcdFx0XHRcdFx0bWF4RGF0ZTogbmV3IERhdGUoMjAyMCwgMCwgMSksXG4gICAgXHRcdFx0XHRcdHNob3dPbjogJ2ZvY3VzJ1xuICAgIFx0XHRcdFx0fSk7XG4gICAgXHRcdFx0fSxcbiAgICBcdFx0XHQvLyBzaG93IHNlYXJjaCBvcHRpb25zXG4gICAgXHRcdFx0c29wdDogW1wiZ3RcIixcImx0XCIsXCJlcVwiXSAvLyBndCA9IGdyZWF0ZXIgLCBsdCA9IGxlc3MgLCBlcSA9IGVxdWFsIHRvXHRcdFx0XHRcdFx0XHRcbiAgICBcdFx0fTtcbiAgICBcdHZhciBlZGl0U2V0dGluZ3MgPSB7XG4gICAgXHRcdFx0cmVjcmVhdGVGb3JtOnRydWUsXG4gICAgXHRcdFx0anFNb2RhbDpmYWxzZSxcbiAgICBcdFx0XHRyZWxvYWRBZnRlclN1Ym1pdDpmYWxzZSxcbiAgICBcdFx0XHRjbG9zZU9uRXNjYXBlOnRydWUsXG4gICAgXHRcdFx0c2F2ZWtleTogW3RydWUsMTNdLFxuICAgIFx0XHRcdGNsb3NlQWZ0ZXJFZGl0OnRydWUsXG4gICAgXHRcdFx0YWZ0ZXJTaG93Rm9ybTpmdW5jdGlvbigpe1xuICAgIFx0XHRcdFx0JChcIiNsdWlfXCIrZ3JpZFswXS5pZCkuaGlkZSgpO1xuICAgIFx0XHRcdH1cbiAgICBcdFx0fTtcbiAgICBcdHZhciBhZGRTZXR0aW5ncyA9IHtcbiAgICBcdFx0XHRyZWNyZWF0ZUZvcm06dHJ1ZSxcbiAgICBcdFx0XHRqcU1vZGFsOmZhbHNlLFxuICAgIFx0XHRcdHJlbG9hZEFmdGVyU3VibWl0OmZhbHNlLFxuICAgIFx0XHRcdHNhdmVrZXk6IFt0cnVlLDEzXSxcbiAgICBcdFx0XHRjbG9zZU9uRXNjYXBlOnRydWUsXG4gICAgXHRcdFx0Y2xvc2VBZnRlckFkZDp0cnVlLFxuICAgIFx0XHRcdGFmdGVyU2hvd0Zvcm06ZnVuY3Rpb24oKXtcbiAgICBcdFx0XHRcdCQoXCIjbHVpX1wiK2dyaWRbMF0uaWQpLmhpZGUoKTtcbiAgICBcdFx0XHR9XG4gICAgXHRcdH07XG4gICAgXHR2YXIgZGVsU2V0dGluZ3MgPSB7XG4gICAgXHRcdFx0cHJvY2Vzc2luZzp0cnVlXG4gICAgXHRcdH07XG4gICAgXHRcdFxuICAgIFx0dmFyIGlkPWZvbGRlcklkO1xuICAgIFx0XG4gICAgXHR2YXIgdmlld0VudHJpZXNVcmwgPSBjbWlzX3Jvb3QrJz9vYmplY3RJZD0nK2lkKycmY21pc3NlbGVjdG9yPWNoaWxkcmVuJztcbiAgICBcdHZhciBzeXNfZmllbGRzPVsnaWQnLCAndHlwZScsICd0aXRsZScsICdkZXNjcmlwdGlvbicsICdtb2RpZmllcicsICdtb2RpZmljYXRpb25UaW1lJywnYXV0b3InLCdjcmVhdGlvblRpbWUnXTtcbiAgICBcdHZhciBmaWVsZHM9WydpZCcsICd0aXRsZScsICdkZXNjcmlwdGlvbicsICdtb2RpZmllcicsICdtb2RpZmljYXRpb25UaW1lJ107XG4gICAgXHR2YXIgcm93U2l6ZT1wYWdpbmF0aW9uQ29uZmlnLnBhZ2VTaXplO1xuICAgIFx0dmFyIGNvbHVtbnMgPVtcbiAgICBcdFx0XHR7IG5hbWU6ICdpZCcsIGtleTogdHJ1ZSwgd2lkdGg6IDc1LCBqc29ubWFwOiAnb2JqZWN0LnByb3BlcnRpZXMuY21pczpvYmplY3RJZC52YWx1ZSd9LFxuICAgIFx0XHRcdHsgbmFtZTogJ3R5cGUnLCBsYWJlbCA6IFwi0KLQuNC/XCIsd2lkdGg6IDEwMCwganNvbm1hcDogJ29iamVjdC5wcm9wZXJ0aWVzLmNtaXM6b2JqZWN0VHlwZUlkLnZhbHVlJyB9LFxuICAgIFx0XHRcdHsgbmFtZTogJ3RpdGxlJywgbGFiZWwgOiBcItCX0LDQs9C+0LvQvtCy0L7QulwiLHdpZHRoOiAxNTAsIGpzb25tYXA6ICdvYmplY3QucHJvcGVydGllcy5jbWlzOm5hbWUudmFsdWUnIH0sXG4gICAgXHRcdFx0eyBuYW1lOiAnZGVzY3JpcHRpb24nLCBsYWJlbCA6IFwi0J7Qv9C40YHQsNC90LjQtVwiLCB3aWR0aDogMTUwLCBqc29ubWFwOiAnb2JqZWN0LnByb3BlcnRpZXMuY21pczpkZXNjcmlwdGlvbi52YWx1ZScgfSxcbiAgICBcdFx0XHR7IG5hbWU6ICdhdXRob3InLCBsYWJlbCA6IFwi0KHQvtC30LTQsNC7XCIsIHdpZHRoOiAxNTAsIGpzb25tYXA6ICdvYmplY3QucHJvcGVydGllcy5jbWlzOmNyZWF0ZWRCeS52YWx1ZScgfSxcbiAgICBcdFx0XHR7IG5hbWU6ICdjcmVhdGlvblRpbWUnLCBsYWJlbCA6IFwi0JTQsNGC0LAg0YHQvtC30LTQsNC90LjRj1wiLCB3aWR0aDogMTUwLCBqc29ubWFwOiAnb2JqZWN0LnByb3BlcnRpZXMuY21pczpjcmVhdGlvbkRhdGUudmFsdWUnICwgXG4gICAgXHRcdFx0XHRcdFx0Zm9ybWF0dGVyOidkYXRlJywgZm9ybWF0b3B0aW9uczoge3NyY2Zvcm1hdDogJ1UvMTAwMCcsIG5ld2Zvcm1hdDonZC5tLlkgSDppJ30sXG4gICAgXHRcdFx0XHRcdFx0c29ydHR5cGU6J2RhdGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaG9wdGlvbnM6IGRhdGVPcHRpb25zXG4gICAgXHRcdFx0fSxcbiAgICBcdFx0XHR7IG5hbWU6ICdtb2RpZmllcicsIGxhYmVsIDogXCLQmNC30LzQtdC90LjQu1wiLCB3aWR0aDogMTUwLCBqc29ubWFwOiAnb2JqZWN0LnByb3BlcnRpZXMuY21pczpsYXN0TW9kaWZpZWRCeS52YWx1ZScgfSxcbiAgICBcdFx0XHR7IG5hbWU6ICdtb2RpZmljYXRpb25UaW1lJywgbGFiZWwgOiBcItCU0LDRgtCwINC40LfQvNC10L3QtdC90LjRj1wiLCB3aWR0aDogMTUwLCBqc29ubWFwOiAnb2JqZWN0LnByb3BlcnRpZXMuY21pczpsYXN0TW9kaWZpY2F0aW9uRGF0ZS52YWx1ZScsIFxuICAgIFx0XHRcdFx0XHRcdGZvcm1hdHRlcjonZGF0ZScsIGZvcm1hdG9wdGlvbnM6IHtzcmNmb3JtYXQ6ICdVLzEwMDAnLCBuZXdmb3JtYXQ6J2QubS5ZIEg6aSd9LFxuICAgIFx0XHRcdFx0XHRcdHNvcnR0eXBlOidkYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hvcHRpb25zOiBkYXRlT3B0aW9uc1xuICAgIFx0XHRcdH1cbiAgICBcdFx0XTtcbiAgICBcdGNvbnNvbGUubG9nKHZpZXdkYXRhKTtcbiAgICBcdGlmICh2aWV3ZGF0YSE9bnVsbCl7XG4gICAgXHRcdHZpZXdFbnRyaWVzVXJsID0gdmlld2RhdGEuZGF0YS5xdWVyeSsnP2ZpZWxkcz0nO1xuICAgIFx0XHRmaWVsZHM9W107XG4gICAgXHRcdGNvbHVtbnM9W107XG4gICAgXHRcdCQuZWFjaCh2aWV3ZGF0YS5kYXRhLmNvbHVtbkRlc2NyaXB0aW9ucywgZnVuY3Rpb24oaSxpdGVtKXtcbiAgICBcdFx0XHRcbiAgICBcdFx0XHRpZiAoaXRlbS52aXNpYmxlIT1mYWxzZSl7XG4gICAgXHRcdFx0XHR2YXIgY29sV2lkdGggPSAxNDA7XG4gICAgXHRcdFx0XHRpZiAoaXRlbS53aWR0aCkgY29sV2lkdGggPSBwYXJzZUludChpdGVtLndpZHRoKTtcbiAgICBcdFx0XHRcdHZhciBmaWVsZE9wcyA9IHtcIm5hbWVcIjogaXRlbS5maWVsZCwgXCJsYWJlbFwiOiBpdGVtLm5hbWUsIFwid2lkdGhcIjogY29sV2lkdGh9O1xuICAgIFx0XHRcdFx0aWYgKGl0ZW0uc29ydEZpZWxkKSB7ZmllbGRPcHMuaW5kZXggPSBpdGVtLnNvcnRGaWVsZH1cbiAgICBcdFx0XHRcdGlmICgkLmluQXJyYXkoaXRlbS5maWVsZCwgc3lzX2ZpZWxkcyk9PS0xKXtcbiAgICBcdFx0XHRcdFx0ZmllbGRPcHMuanNvbm1hcD1cImRhdGEuXCIraXRlbS5maWVsZDtcbiAgICBcdFx0XHRcdFx0ZmllbGRzLnB1c2goaXRlbS5maWVsZCk7XG4gICAgXHRcdFx0XHR9XG4gICAgXHRcdFx0XHRpZiAoaXRlbS50eXBlPT0nSU5URUdFUicpIGZpZWxkT3BzLnNlYXJjaG9wdGlvbnM9e3NvcHQ6IFtcImd0XCIsXCJsdFwiLFwiZXFcIl0gfTtcbiAgICBcdFx0XHRcdGlmIChpdGVtLnR5cGU9PSdEQVRFJykge1xuICAgIFx0XHRcdFx0XHRmaWVsZE9wcy5zb3J0dHlwZT0nZGF0ZSc7XG4gICAgXHRcdFx0XHRcdGZpZWxkT3BzLnNlYXJjaG9wdGlvbnM9ZGF0ZU9wdGlvbnM7XG4gICAgXHRcdFx0XHR9XG4gICAgXHRcdFx0XHRjb2x1bW5zLnB1c2goZmllbGRPcHMpO1xuICAgIFx0XHRcdH1cbiAgICBcdFx0fSk7XG4gICAgXHRcdGNvbnNvbGUubG9nKGNvbHVtbnMpO1xuICAgIFx0XHR2aWV3RW50cmllc1VybCArPWZpZWxkcy5qb2luKCk7XG4gICAgXHRcdHZpZXdFbnRyaWVzVXJsICs9JyZzaXplPScrcm93U2l6ZTtcbiAgICBcdFx0Y29uc29sZS5sb2codmlld0VudHJpZXNVcmwpO1xuICAgIFx0fVxuICAgIFx0XG4gICAgXHQkKFwiI2pxR3JpZFwiKS5qcUdyaWQoe1xuICAgIFx0XHR1cmw6IHZpZXdFbnRyaWVzVXJsLFxuICAgIFx0XHRtdHlwZTogXCJHRVRcIixcbiAgICBcdFx0ZGF0YXR5cGU6IFwianNvblwiLFxuICAgIFx0XHRwYWdlOiAxLFxuICAgIFx0XHRjb2xNb2RlbDogY29sdW1ucyxcbiAgICBcdFx0YXV0b3dpZHRoOiB0cnVlLFxuICAgIFx0XHRzaHJpbmtUb0ZpdDogZmFsc2UsXG4gICAgXHRcdGhlaWdodDonMTAwJScsXG4gICAgXHRcdG1heEhlaWdodDogNTAwLFxuICAgIFx0XHRyb3dOdW06IHBhZ2luYXRpb25Db25maWcucGFnZVNpemUsXG4gICAgXHRcdC8vZ3VpU3R5bGU6IFwiYm9vdHN0cmFwXCIsXG4gICAgXHRcdHNlcmlhbGl6ZUdyaWREYXRhOiBmdW5jdGlvbihwb3N0RGF0YSkge1xuICAgIFx0XHRcdGlmICh0eXBlb2YocG9zdERhdGEucGFnZSkgPT09IFwibnVtYmVyXCIpIHtcbiAgICBcdFx0XHRcdHBvc3REYXRhLnBhZ2UtLTsgLy8gZGVjcmVhc2UgdGhlIHZhbHVlIG9mIHBhZ2UgYmVmb3JlIHNlbmRpbmcgdG8gdGhlIHNlcnZlclxuICAgIFx0XHRcdH1cbiAgICBcdFx0XHRpZiAocG9zdERhdGEuc2lkeCE9bnVsbCAmJiBwb3N0RGF0YS5zaWR4IT0nJyl7XG4gICAgXHRcdFx0XHRwb3N0RGF0YS5zb3J0PXBvc3REYXRhLnNpZHgrXCIsXCIrcG9zdERhdGEuc29yZDtcbiAgICBcdFx0XHR9ZWxzZXtcbiAgICBcdFx0XHRcdHBvc3REYXRhLnNvcnQ9XCJJRCxERVNDXCJcbiAgICBcdFx0XHR9XG4gICAgXHRcdFx0cmV0dXJuIHBvc3REYXRhO1xuICAgIFx0XHR9LFxuICAgIFx0XHRqc29uUmVhZGVyOiB7XG4gICAgXHRcdFx0cmVwZWF0aXRlbXM6IGZhbHNlLFxuICAgIFx0XHRcdHJvb3Q6IGZ1bmN0aW9uKGRhdGEpe1xuICAgIFx0XHRcdFx0aWYgKGRhdGEuY29udGVudCl7XG4gICAgXHRcdFx0XHRcdHJldHVybiBkYXRhLmNvbnRlbnQ7XG4gICAgXHRcdFx0XHR9XG4gICAgXHRcdFx0XHRyZXR1cm4gZGF0YS5vYmplY3RzO1xuICAgIFx0XHRcdH0sXG4gICAgXHRcdFx0dG90YWw6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICBcdFx0XHRcdHJldHVybiBkYXRhLnRvdGFsUGFnZXM7XG4gICAgXHRcdFx0fSxcbiAgICBcdFx0XHRwYWdlOiBmdW5jdGlvbihkYXRhKXtcbiAgICBcdFx0XHRcdHJldHVybiBkYXRhLm51bWJlcisxO1xuICAgIFx0XHRcdH0sXG4gICAgXHRcdFx0cmVjb3JkczogZnVuY3Rpb24oZGF0YSl7XG4gICAgXHRcdFx0XHRpZihkYXRhLnRvdGFsRWxlbWVudHMpe1xuICAgIFx0XHRcdFx0XHRyZXR1cm4gZGF0YS50b3RhbEVsZW1lbnRzO1xuICAgIFx0XHRcdFx0fVxuICAgIFx0XHRcdFx0cmV0dXJuIGRhdGEubnVtSXRlbXM7XG4gICAgXHRcdFx0fSBcbiAgICBcdFx0fSxcbiAgICBcdFx0b25TZWxlY3RSb3c6IGZ1bmN0aW9uKGlkcykgeyBcbiAgICAgICAgICAgICAgICBpZihpZHMgPT0gbnVsbCkge1xuICAgIFx0XHRcdFx0bG9hZEdyaWRDTUlTKFwiMFwiKTtcbiAgICBcdFx0XHR9ZWxzZXtcbiAgICBcdFx0XHRcdHZhciByb3dEYXRhID0gJChcIiNqcUdyaWRcIikuZ2V0Um93RGF0YShpZHMpO1xuICAgIFx0XHRcdFx0Y29uc29sZS5sb2coXCJUeXBlOiBcIityb3dEYXRhWyd0eXBlJ10pXG4gICAgXHRcdFx0XHRpZiAocm93RGF0YVsndHlwZSddPT1cImNtaXM6Zm9sZGVyXCIpe1xuICAgIFx0XHRcdFx0XHQkc2NvcGUubG9hZEdyaWQoaWRzKTtcbiAgICBcdFx0XHRcdH1lbHNle1xuICAgIFx0XHRcdFx0XHRjb25zb2xlLmxvZyhcInJlcXVlc3QgZG9jIFwiK2lkcyk7XG4gICAgXHRcdFx0XHRcdHZhciBkb2NpZCA9IHBhcnNlSW50KGlkcyk7XG4gICAgXHRcdFx0XHRcdHZhciB2aWV3c1VybCA9ICcvam9vcS9hcGkvZG9jcy8nK2RvY2lkO1xuICAgIFx0XHRcdFx0XHQkLmdldEpTT04odmlld3NVcmwsIGZ1bmN0aW9uKHZpZXdkYXRhKSB7XG4gICAgXHRcdFx0XHRcdFx0aWYgKHZpZXdkYXRhLnR5cGU9PSd2aWV3Jyl7XG4gICAgXHRcdFx0XHRcdFx0XHRjdXJyZW50RGVmRm9ybUlkPXZpZXdkYXRhLmRhdGEuZGVmYXVsdEZvcm07XG4gICAgXHRcdFx0XHRcdFx0XHQkc2NvcGUubG9hZEdyaWQoJzAnLHZpZXdkYXRhKTtcbiAgICBcdFx0XHRcdFx0XHR9ZWxzZXtcbiAgICBcdFx0XHRcdFx0XHRcdCRzdGF0ZS5nbygndG9kby52aWV3Jywge3RvZG9JZDogZG9jaWR9LCB7IHJlbG9hZDogdHJ1ZSwgaW5oZXJpdDogdHJ1ZSwgbm90aWZ5OiB0cnVlIH0pO1xuICAgIFx0XHRcdFx0XHRcdH1cbiAgICBcdFx0XHRcdFx0fSk7XG4gICAgXHRcdFx0XHR9XG4gICAgXHRcdFx0fVxuICAgIFx0XHR9LFxuICAgIFx0XHRzY3JvbGw6IDEsIC8vIHNldCB0aGUgc2Nyb2xsIHByb3BlcnR5IHRvIDEgdG8gZW5hYmxlIHBhZ2luZyB3aXRoIHNjcm9sbGJhciAtIHZpcnR1YWwgbG9hZGluZyBvZiByZWNvcmRzXG4gICAgXHRcdGVtcHR5cmVjb3JkczogJ1Njcm9sbCB0byBib3R0b20gdG8gcmV0cmlldmUgbmV3IHBhZ2UnLCAvLyB0aGUgbWVzc2FnZSB3aWxsIGJlIGRpc3BsYXllZCBhdCB0aGUgYm90dG9tIFxuICAgIFx0XHRwYWdlcjogXCIjanFHcmlkUGFnZXJcIixcbiAgICBcdFx0bG9hZENvbXBsZXRlOiBmdW5jdGlvbigpIHtcbiAgICBcdFx0XHQkKFwidHIuanFncm93XCIsIHRoaXMpLmNvbnRleHRNZW51KCdmb2xkZXJNZW51Jywge1xuICAgIFx0XHRcdFx0YmluZGluZ3M6IHtcbiAgICBcdFx0XHRcdFx0J2VkaXQnOiBmdW5jdGlvbih0cmlnZ2VyKSB7XG4gICAgXHRcdFx0XHRcdFx0Ly8gdHJpZ2dlciBpcyB0aGUgRE9NIGVsZW1lbnQgKFwidHIuanFncm93XCIpIHdoaWNoIGFyZSB0cmlnZ2VyZWRcbiAgICBcdFx0XHRcdFx0XHQkKCcjanFHcmlkJykuZWRpdEdyaWRSb3codHJpZ2dlci5pZCwgZWRpdFNldHRpbmdzKTtcbiAgICBcdFx0XHRcdFx0fSxcbiAgICBcdFx0XHRcdFx0J2FkZCc6IGZ1bmN0aW9uKC8qdHJpZ2dlciovKSB7XG4gICAgXHRcdFx0XHRcdFx0JCgnI2pxR3JpZCcpLmVkaXRHcmlkUm93KFwibmV3XCIsIGFkZFNldHRpbmdzKTtcbiAgICBcdFx0XHRcdFx0fSxcbiAgICBcdFx0XHRcdFx0J2RlbCc6IGZ1bmN0aW9uKHRyaWdnZXIpIHtcbiAgICBcdFx0XHRcdFx0XHRpZiAoJCgnI2RlbCcpLmhhc0NsYXNzKCd1aS1zdGF0ZS1kaXNhYmxlZCcpID09PSBmYWxzZSkge1xuICAgIFx0XHRcdFx0XHRcdFx0Ly8gZGlzYWJsZWQgaXRlbSBjYW4gZG8gYmUgY2hvb3NlZFxuICAgIFx0XHRcdFx0XHRcdFx0JCgnI2pxR3JpZCcpLmRlbEdyaWRSb3codHJpZ2dlci5pZCwgZGVsU2V0dGluZ3MpO1xuICAgIFx0XHRcdFx0XHRcdH1cbiAgICBcdFx0XHRcdFx0fVxuICAgIFx0XHRcdFx0fSxcbiAgICBcdFx0XHRcdG9uQ29udGV4dE1lbnU6IGZ1bmN0aW9uKGV2ZW50LyosIG1lbnUqLykge1xuICAgIFx0XHRcdFx0XHR2YXIgcm93SWQgPSAkKGV2ZW50LnRhcmdldCkuY2xvc2VzdChcInRyLmpxZ3Jvd1wiKS5hdHRyKFwiaWRcIik7XG4gICAgXHRcdFx0XHRcdC8vZ3JpZC5zZXRTZWxlY3Rpb24ocm93SWQpO1xuICAgIFx0XHRcdFx0XHQvLyBkaXNhYmxlIG1lbnUgZm9yIHJvd3Mgd2l0aCBldmVuIHJvd2lkc1xuICAgIFx0XHRcdFx0XHQkKCcjZGVsJykuYXR0cihcImRpc2FibGVkXCIsTnVtYmVyKHJvd0lkKSUyID09PSAwKTtcbiAgICBcdFx0XHRcdFx0aWYgKE51bWJlcihyb3dJZCklMiA9PT0gMCkge1xuICAgIFx0XHRcdFx0XHRcdCQoJyNkZWwnKS5hdHRyKFwiZGlzYWJsZWRcIixcImRpc2FibGVkXCIpLmFkZENsYXNzKCd1aS1zdGF0ZS1kaXNhYmxlZCcpO1xuICAgIFx0XHRcdFx0XHR9IGVsc2Uge1xuICAgIFx0XHRcdFx0XHRcdCQoJyNkZWwnKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIikucmVtb3ZlQ2xhc3MoJ3VpLXN0YXRlLWRpc2FibGVkJyk7XG4gICAgXHRcdFx0XHRcdH1cbiAgICBcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG4gICAgXHRcdFx0XHR9XG4gICAgXHRcdFx0fSk7XG4gICAgXHRcdH1cbiAgICBcdH0pO1xuICAgIFx0JCgnI2pxR3JpZCcpLm5hdkdyaWQoXCIjanFHcmlkUGFnZXJcIiwgeyAgICAgICAgICAgICAgICBcbiAgICBcdFx0c2VhcmNoOiB0cnVlLCAvLyBzaG93IHNlYXJjaCBidXR0b24gb24gdGhlIHRvb2xiYXJcbiAgICBcdFx0YWRkOiBmYWxzZSxcbiAgICBcdFx0ZWRpdDogZmFsc2UsXG4gICAgXHRcdGRlbDogZmFsc2UsXG4gICAgXHRcdHJlZnJlc2g6IHRydWVcbiAgICBcdFx0fSxcbiAgICBcdFx0e30sIC8vIGVkaXQgb3B0aW9uc1xuICAgIFx0XHR7fSwgLy8gYWRkIG9wdGlvbnNcbiAgICBcdFx0e30sIC8vIGRlbGV0ZSBvcHRpb25zXG4gICAgXHRcdHsgbXVsdGlwbGVTZWFyY2g6IHRydWUsIHVuaXF1ZVNlYXJjaEZpZWxkcyA6IHRydWUsIG11bHRpcGxlR3JvdXAgOiB0cnVlfVxuICAgIFx0KTtcblx0XHQgIH1cblx0XHQgIFxuXG5cdFx0ICAkc2NvcGUubG9hZEdyaWQoJzAnKTtcbiAgICB9XSlcbiAgICAuY29udHJvbGxlcignQWRkVG9kb0NvbnRyb2xsZXInLCBbJyRzY29wZScsICckc3RhdGUnLCAnVG9kb3MnLFxuICAgICAgICBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZSwgVG9kb3MpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdSZW5kZXJpbmcgYWRkIHRvZG8gZW50cnkgcGFnZS4nKTtcbiAgICAgICAgICAgICRzY29wZS50b2RvID0ge307XG5cbiAgICAgICAgICAgICRzY29wZS5zYXZlVG9kbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUudG9kb0Zvcm0uJHZhbGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvblN1Y2Nlc3MgPSBmdW5jdGlvbihhZGRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCd0b2RvLnZpZXcnLCB7dG9kb0lkOiBhZGRlZC5pZH0sIHsgcmVsb2FkOiB0cnVlLCBpbmhlcml0OiB0cnVlLCBub3RpZnk6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50b2RvLmRhdGE9SlNPTi5wYXJzZSgkc2NvcGUudG9kby5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgVG9kb3Muc2F2ZSgkc2NvcGUudG9kbywgb25TdWNjZXNzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XSlcbiAgICAuY29udHJvbGxlcignRGVsZXRlVG9kb0NvbnRyb2xsZXInLCBbJyRzY29wZScsICckbW9kYWxJbnN0YW5jZScsICckc3RhdGUnLCAnVG9kb3MnLCAnZGVsZXRlZFRvZG8nLFxuICAgICAgICBmdW5jdGlvbigkc2NvcGUsICRtb2RhbEluc3RhbmNlLCAkc3RhdGUsIFRvZG9zLCBkZWxldGVkVG9kbykge1xuICAgICAgICAgICAgJHNjb3BlLnRvZG8gPSBkZWxldGVkVG9kbztcblxuICAgICAgICAgICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICRtb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgJHNjb3BlLmRlbGV0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBvblN1Y2Nlc3MgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgJG1vZGFsSW5zdGFuY2UuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCd0b2RvLmluZGV4Jywge30sIHsgcmVsb2FkOiB0cnVlLCBpbmhlcml0OiB0cnVlLCBub3RpZnk6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBUb2Rvcy5kZWxldGUoJHNjb3BlLnRvZG8sIG9uU3VjY2Vzcyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XSlcbiAgICAuY29udHJvbGxlcignRWRpdFRvZG9Db250cm9sbGVyJywgWyckc2NvcGUnLCAnJHN0YXRlJywgJ3VwZGF0ZWRUb2RvJywgJ1RvZG9zJyxcbiAgICAgICAgZnVuY3Rpb24oJHNjb3BlLCAkc3RhdGUsIHVwZGF0ZWRUb2RvLCBUb2Rvcykge1xuICAgICAgICAgICAgY29uc29sZS5sb2codXBkYXRlZFRvZG8pO1xuICAgICAgICAgICAgJHNjb3BlLnRvZG8gPSB1cGRhdGVkVG9kbztcbiAgICAgICAgICAgICRzY29wZS50b2RvLmRhdGE9SlNPTi5zdHJpbmdpZnkoJHNjb3BlLnRvZG8uZGF0YSk7XG4gICAgICAgICAgICAkc2NvcGUuc2F2ZVRvZG8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnRvZG9Gb3JtLiR2YWxpZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgb25TdWNjZXNzID0gZnVuY3Rpb24odXBkYXRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCd0b2RvLnZpZXcnLCB7dG9kb0lkOiB1cGRhdGVkLmlkfSwgeyByZWxvYWQ6IHRydWUsIGluaGVyaXQ6IHRydWUsIG5vdGlmeTogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRvZG8uZGF0YT1KU09OLnBhcnNlKCRzY29wZS50b2RvLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBUb2Rvcy51cGRhdGUoJHNjb3BlLnRvZG8sIG9uU3VjY2Vzcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfV0pXG4gICAgLmNvbnRyb2xsZXIoJ1NlYXJjaENvbnRyb2xsZXInLCBbJyRzY29wZScsICckc3RhdGUnLCAncGFnaW5hdGlvbkNvbmZpZycsXG4gICAgICAgIGZ1bmN0aW9uICgkc2NvcGUsICRzdGF0ZSwgcGFnaW5hdGlvbkNvbmZpZykge1xuXG4gICAgICAgICAgICB2YXIgdXNlcldyaXRpbmdTZWFyY2hUZXJtID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgbWluaW11bVNlYXJjaFRlcm1MZW5ndGggPSAzO1xuXG4gICAgICAgICAgICAkc2NvcGUubWlzc2luZ0NoYXJzID0gbWluaW11bVNlYXJjaFRlcm1MZW5ndGg7XG4gICAgICAgICAgICAkc2NvcGUuc2VhcmNoVGVybSA9IFwiXCI7XG5cbiAgICAgICAgICAgICRzY29wZS5zZWFyY2hGaWVsZEJsdXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB1c2VyV3JpdGluZ1NlYXJjaFRlcm0gPSBmYWxzZTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICRzY29wZS5zZWFyY2hGaWVsZEZvY3VzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdXNlcldyaXRpbmdTZWFyY2hUZXJtID0gdHJ1ZTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICRzY29wZS5zaG93TWlzc2luZ0NoYXJhY3RlclRleHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZiAodXNlcldyaXRpbmdTZWFyY2hUZXJtKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuc2VhcmNoVGVybS5sZW5ndGggPCBtaW5pbXVtU2VhcmNoVGVybUxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAkc2NvcGUuc2VhcmNoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5zZWFyY2hUZXJtLmxlbmd0aCA8IG1pbmltdW1TZWFyY2hUZXJtTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5taXNzaW5nQ2hhcnMgPSBtaW5pbXVtU2VhcmNoVGVybUxlbmd0aCAtICRzY29wZS5zZWFyY2hUZXJtLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5taXNzaW5nQ2hhcnMgPSAwO1xuICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ3RvZG8uc2VhcmNoJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtzZWFyY2hUZXJtOiAkc2NvcGUuc2VhcmNoVGVybSwgcGFnZU51bWJlcjogMSwgcGFnZVNpemU6IHBhZ2luYXRpb25Db25maWcucGFnZVNpemV9LFxuICAgICAgICAgICAgICAgICAgICAgICAge3JlbG9hZDogdHJ1ZSwgaW5oZXJpdDogdHJ1ZSwgbm90aWZ5OiB0cnVlfVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgfV0pXG4gICAgLmNvbnRyb2xsZXIoJ1NlYXJjaFJlc3VsdENvbnRyb2xsZXInLCBbJyRzY29wZScsICckc3RhdGUnLCAncGFnaW5hdGlvbkNvbmZpZycsICdzZWFyY2hUZXJtJywgJ3NlYXJjaFJlc3VsdHMnLFxuICAgICAgICBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZSwgcGFnaW5hdGlvbkNvbmZpZywgc2VhcmNoVGVybSwgc2VhcmNoUmVzdWx0cykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1JlbmRlcmluZyBzZWFyY2ggcmVzdWx0cyBwYWdlLicpO1xuICAgICAgICAgICAgJHNjb3BlLnRvZG9zID0gc2VhcmNoUmVzdWx0cy5jb250ZW50O1xuXG4gICAgICAgICAgICAkc2NvcGUucGFnaW5hdGlvbiA9IHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UGFnZTogc2VhcmNoUmVzdWx0cy5udW1iZXIgKyAxLFxuICAgICAgICAgICAgICAgIGl0ZW1zUGVyUGFnZTogcGFnaW5hdGlvbkNvbmZpZy5wYWdlU2l6ZSxcbiAgICAgICAgICAgICAgICB0b3RhbEl0ZW1zOiBzZWFyY2hSZXN1bHRzLnRvdGFsRWxlbWVudHNcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICRzY29wZS5wYWdlQ2hhbmdlZCA9IGZ1bmN0aW9uKG5ld1BhZ2VOdW1iZXIpIHtcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ3RvZG8uc2VhcmNoJyxcbiAgICAgICAgICAgICAgICAgICAge3NlYXJjaFRlcm06IHNlYXJjaFRlcm0sIHBhZ2VOdW1iZXI6IG5ld1BhZ2VOdW1iZXIsIHBhZ2VTaXplOiBwYWdpbmF0aW9uQ29uZmlnLnBhZ2VTaXplfSxcbiAgICAgICAgICAgICAgICAgICAge3JlbG9hZDogdHJ1ZSwgaW5oZXJpdDogdHJ1ZSwgbm90aWZ5OiB0cnVlfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XSlcbiAgICAuY29udHJvbGxlcignVmlld1RvZG9Db250cm9sbGVyJywgWyckc2NvcGUnLCAnJHN0YXRlJywgJyRtb2RhbCcsICd2aWV3ZWRUb2RvJyxcbiAgICAgICAgZnVuY3Rpb24oJHNjb3BlLCAkc3RhdGUsICRtb2RhbCwgdmlld2VkVG9kbykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1JlbmRlcmluZyB2aWV3IHRvZG8gZW50cnkgcGFnZS4nKTtcbiAgICAgICAgICAgICRzY29wZS50b2RvID0gdmlld2VkVG9kbztcblxuICAgICAgICAgICAgJHNjb3BlLnNob3dFZGl0UGFnZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICRzdGF0ZS5nbyhcInRvZG8uZWRpdFwiLCB7dG9kb0lkOiAkc2NvcGUudG9kby5pZH0sIHsgcmVsb2FkOiB0cnVlLCBpbmhlcml0OiB0cnVlLCBub3RpZnk6IHRydWUgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAkc2NvcGUuc2hvd0RlbGV0ZURpYWxvZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICRtb2RhbC5vcGVuKHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdmcm9udGVuZC9wYXJ0aWFscy90b2RvL2RlbGV0ZS10b2RvLW1vZGFsLmh0bWwnLFxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnRGVsZXRlVG9kb0NvbnRyb2xsZXInLFxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVkVG9kbzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkc2NvcGUudG9kbztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfV0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnYXBwLnRvZG8uc2VydmljZXMnLCBbJ25nUmVzb3VyY2UnXSlcbiAgICAuZmFjdG9yeSgnVG9kb3MnLCBbJyRyZXNvdXJjZScsICdOb3RpZmljYXRpb25TZXJ2aWNlJywgZnVuY3Rpb24oJHJlc291cmNlLCBOb3RpZmljYXRpb25TZXJ2aWNlKSB7XG4gICAgICAgIHZhciBhcGkgPSAkcmVzb3VyY2UoJy9hcGkvZG9jcy86aWQnLCB7XCJpZFwiOiBcIkBpZFwifSwge1xuICAgICAgICAgICAgcXVlcnk6ICB7bWV0aG9kOiAnR0VUJywgcGFyYW1zOiB7fSwgaXNBcnJheTogZmFsc2V9LFxuICAgICAgICAgICAgZ2V0OiAgICB7bWV0aG9kOiAnR0VUJ30sXG4gICAgICAgICAgICBzYXZlOiB7bWV0aG9kOiAnUE9TVCd9LFxuICAgICAgICAgICAgdXBkYXRlOiB7bWV0aG9kOiAnUFVUJ31cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRlbGV0ZTogZnVuY3Rpb24odG9kbywgc3VjY2Vzc0NhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFwaS5kZWxldGUodG9kbywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIE5vdGlmaWNhdGlvblNlcnZpY2UuZmxhc2hNZXNzYWdlKCd0b2RvLm5vdGlmaWNhdGlvbnMuZGVsZXRlLnN1Y2Nlc3MnLCAnc3VjY2VzcycpO1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzQ2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBxdWVyeTogZnVuY3Rpb24ocGFnZU51bWJlciwgcGFnZVNpemUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXBpLnF1ZXJ5KHtwYWdlOiBwYWdlTnVtYmVyLCBzaXplOiBwYWdlU2l6ZSwgc29ydDogJ0lELERFU0MnfSkuJHByb21pc2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbih0b2RvSWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXBpLmdldCh7aWQ6IHRvZG9JZH0pLiRwcm9taXNlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNhdmU6IGZ1bmN0aW9uKHRvZG8sIHN1Y2Nlc3NDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGFwaS5zYXZlKHRvZG8sIGZ1bmN0aW9uKGFkZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIE5vdGlmaWNhdGlvblNlcnZpY2UuZmxhc2hNZXNzYWdlKCd0b2RvLm5vdGlmaWNhdGlvbnMuYWRkLnN1Y2Nlc3MnLCAnc3VjY2VzcycpO1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzQ2FsbGJhY2soYWRkZWQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHVwZGF0ZTogZnVuY3Rpb24odG9kbywgc3VjY2Vzc0NhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgYXBpLnVwZGF0ZSh0b2RvLCBmdW5jdGlvbih1cGRhdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIE5vdGlmaWNhdGlvblNlcnZpY2UuZmxhc2hNZXNzYWdlKCd0b2RvLm5vdGlmaWNhdGlvbnMudXBkYXRlLnN1Y2Nlc3MnLCAnc3VjY2VzcycpO1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzQ2FsbGJhY2sodXBkYXRlZCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfV0pOyIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdkZW1vJywgW1xyXG4gICAgJ2JsdWVpbXAuZmlsZXVwbG9hZCdcclxuXSlcclxuICAgIC5jb25maWcoW1xyXG4gICAgICAgICckaHR0cFByb3ZpZGVyJywgJ2ZpbGVVcGxvYWRQcm92aWRlcicsXHJcbiAgICAgICAgZnVuY3Rpb24gKCRodHRwUHJvdmlkZXIsIGZpbGVVcGxvYWRQcm92aWRlcikge1xyXG4gICAgICAgICAgICBkZWxldGUgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnWC1SZXF1ZXN0ZWQtV2l0aCddO1xyXG4gICAgICAgICAgICBmaWxlVXBsb2FkUHJvdmlkZXIuZGVmYXVsdHMucmVkaXJlY3QgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5yZXBsYWNlKFxyXG4gICAgICAgICAgICAgICAgL1xcL1teXFwvXSokLyxcclxuICAgICAgICAgICAgICAgICcvY29ycy9yZXN1bHQuaHRtbD8lcydcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICBdKVxyXG5cclxuICAgIC5jb250cm9sbGVyKCdEZW1vRmlsZVVwbG9hZENvbnRyb2xsZXInLCBbXHJcbiAgICAgICAgJyRzY29wZScsICckaHR0cCcsICckZmlsdGVyJywgJyR3aW5kb3cnLFxyXG4gICAgICAgIGZ1bmN0aW9uICgkc2NvcGUsICRodHRwKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5vcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgdXJsOiB1cmxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICBdKVxyXG5cclxuICAgIC5jb250cm9sbGVyKCdGaWxlRGVzdHJveUNvbnRyb2xsZXInLCBbXHJcbiAgICAgICAgJyRzY29wZScsICckaHR0cCcsXHJcbiAgICAgICAgZnVuY3Rpb24gKCRzY29wZSwgJGh0dHApIHtcclxuICAgICAgICAgICAgdmFyIGZpbGUgPSAkc2NvcGUuZmlsZSxcclxuICAgICAgICAgICAgICAgIHN0YXRlO1xyXG4gICAgICAgICAgICBpZiAoZmlsZS51cmwpIHtcclxuICAgICAgICAgICAgICAgIGZpbGUuJHN0YXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdGF0ZTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBmaWxlLiRkZXN0cm95ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlID0gJ3BlbmRpbmcnO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkaHR0cCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogZmlsZS5kZWxldGVVcmwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogZmlsZS5kZWxldGVUeXBlXHJcbiAgICAgICAgICAgICAgICAgICAgfSkudGhlbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSAncmVzb2x2ZWQnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsZWFyKGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9ICdyZWplY3RlZCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICghZmlsZS4kY2FuY2VsICYmICFmaWxlLl9pbmRleCkge1xyXG4gICAgICAgICAgICAgICAgZmlsZS4kY2FuY2VsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jbGVhcihmaWxlKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBdKTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnYXBwLnNlYXJjaC5zZXJ2aWNlcycsIFsnbmdSZXNvdXJjZSddKVxuICAgIC5mYWN0b3J5KCdTZWFyY2gnLCBbJyRyZXNvdXJjZScsIGZ1bmN0aW9uKCRyZXNvdXJjZSkge1xuICAgICAgICB2YXIgYXBpID0gJHJlc291cmNlKCcvYXBpL2RvY3Mvc2VhcmNoJywge30sIHtcbiAgICAgICAgICAgICdxdWVyeSc6ICB7bWV0aG9kOidHRVQnLCBpc0FycmF5OmZhbHNlfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmluZEJ5U2VhcmNoVGVybTogZnVuY3Rpb24oc2VhcmNoVGVybSwgcGFnZU51bWJlciwgcGFnZVNpemUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXBpLnF1ZXJ5KHtwYWdlOiBwYWdlTnVtYmVyLCBzZWFyY2hUZXJtOiBzZWFyY2hUZXJtLCBzaXplOiBwYWdlU2l6ZSwgc29ydDogJ0lELERFU0MnfSkuJHByb21pc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfV0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==