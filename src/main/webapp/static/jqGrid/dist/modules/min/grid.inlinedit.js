var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,k,r){if(r.get||r.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[k]=r.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var k=0;return $jscomp.iteratorPrototype(function(){return k<a.length?{done:!1,value:a[k++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(a,k){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var r=0,d={next:function(){if(r<a.length){var w=r++;return{value:k(w,a[w]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill=function(a,k,r,d){if(k){r=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var w=a[d];w in r||(r[w]={});r=r[w]}a=a[a.length-1];d=r[a];k=k(d);k!=d&&null!=k&&$jscomp.defineProperty(r,a,{configurable:!0,writable:!0,value:k})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
$jscomp.findInternal=function(a,k,r){a instanceof String&&(a=String(a));for(var d=a.length,w=0;w<d;w++){var C=a[w];if(k.call(r,C,w,a))return{i:w,v:C}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,r){return $jscomp.findInternal(this,a,r).v}},"es6-impl","es3");
(function(a){"function"===typeof define&&define.amd?define(["jquery","./grid.base","./jquery.fmatter","./grid.common"],a):"object"===typeof exports?a(require("jquery")):a(jQuery)})(function(a){var k=a.jgrid,r=k.fullBoolFeedback,d=k.hasOneFromClasses,w=a.fn.jqGrid,C=function(a){return w.getGuiStyles.call(this,"states."+a)},E=function(e){var p=a.makeArray(arguments).slice(1);p.unshift("");p.unshift("Inline");p.unshift(e);return k.feedback.apply(this,p)};k.inlineEdit=k.inlineEdit||{};k.extend({editRow:function(e,
p,f,h,c,t,d,u,m,b){var g={},l=a.makeArray(arguments).slice(1);"object"===a.type(l[0])?g=l[0]:(void 0!==p&&(g.keys=p),a.isFunction(f)&&(g.oneditfunc=f),a.isFunction(h)&&(g.successfunc=h),void 0!==c&&(g.url=c),null!=t&&(g.extraparam=t),a.isFunction(d)&&(g.aftersavefunc=d),a.isFunction(u)&&(g.errorfunc=u),a.isFunction(m)&&(g.afterrestorefunc=m),a.isFunction(b)&&(g.beforeEditRow=b));return this.each(function(){var b=this,c=a(b),h=b.p,t=0,m=null,p={},f=h.colModel,v=h.prmNames;if(b.grid){var d=a.extend(!0,
{keys:!1,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,beforeEditRow:null,focusField:!0},k.inlineEdit,h.inlineEditing||{},g),l=c.jqGrid("getInd",e,!0),u=d.focusField,F="object"===typeof u&&null!=u?a(u.target||u).closest("tr.jqgrow>td")[0]:null;if(!1!==l&&(d.extraparam[v.oper]===v.addoper||E.call(b,d,"beforeEditRow",d,e))&&"0"===(a(l).attr("editable")||"0")&&!a(l).hasClass("not-editable-row")){v=k.detectRowEditing.call(b,
e);if(null!=v&&"cellEditing"===v.mode){var v=v.savedRow,w=b.rows[v.id],B=C.call(b,"select");c.jqGrid("restoreCell",v.id,v.ic);a(w.cells[v.ic]).removeClass("edit-cell "+B);a(w).addClass(B).attr({"aria-selected":"true",tabindex:"0"})}k.enumEditableCells.call(b,l,a(l).hasClass("jqgrid-new-row")?"add":"edit",function(c){var g=c.cm,n=a(c.dataElement),d=c.dataWidth,f,l=g.name,K=g.edittype,u=c.iCol,q=g.editoptions||{};if("hidden"!==c.editable){try{f=a.unformat.call(this,c.td,{rowId:e,colModel:g},u)}catch(Q){f=
"textarea"===K?n.text():n.html()}p[l]=f;n.html("");g=a.extend({},q,{id:e+"_"+l,name:l,rowId:e,mode:c.mode,cm:g,iCol:u});if("&nbsp;"===f||"&#160;"===f||1===f.length&&160===f.charCodeAt(0))f="";f=k.createEl.call(b,K,g,f,!0,a.extend({},k.ajaxOptions,h.ajaxSelectOptions||{}));a(f).addClass("editable");n.append(f);d&&a(f).width(c.dataWidth);k.bindEv.call(b,f,g);"select"===K&&!0===q.multiple&&void 0===q.dataUrl&&k.msie&&a(f).width(a(f).width());null===m&&(m=u);t++}});0<t&&(p.id=e,h.savedRow.push(p),a(l).attr("editable",
"1"),u&&("number"===typeof u&&parseInt(u,10)<=f.length?m=u:"string"===typeof u?m=h.iColByName[u]:null!=F&&(m=F.cellIndex),setTimeout(function(){var e=c.jqGrid("getNumberOfFrozenColumns"),g=function(a){return h.frozenColumns&&0<e&&m<e?b.grid.fbRows[l.rowIndex].cells[a]:l.cells[a]},k=function(b){return a(b).find("input,textarea,select,button,object,*[tabindex]").filter(":input:visible:not(:disabled)")},f=function(){return k(h.frozenColumns&&0<e?b.grid.fbRows[l.rowIndex]:l).first()},n=k(g(m));0<n.length?
n.first().focus():"number"===typeof d.defaultFocusField||"string"===typeof d.defaultFocusField?(n=k(g("number"===typeof d.defaultFocusField?d.defaultFocusField:h.iColByName[d.defaultFocusField])),0===n.length&&(n=f()),n.first().focus()):f().focus()},0)),!0===d.keys&&(f=a(l),h.frozenColumns&&(f=f.add(b.grid.fbRows[l.rowIndex])),f.on("keydown",function(a){if(27===a.keyCode)return c.jqGrid("restoreRow",e,d.afterrestorefunc),!1;if(13===a.keyCode){if("TEXTAREA"===a.target.tagName)return!0;c.jqGrid("saveRow",
e,d);return!1}})),r.call(b,d.oneditfunc,"jqGridInlineEditRow",e,d))}}})},saveRow:function(e,d,f,h,c,t,F,u){var m=a.makeArray(arguments).slice(1),b={},g=this[0],l=a(g),n=null!=g?g.p:null,p,w=k.info_dialog,x=a.isFunction,L=null!=k.defaults&&x(k.defaults.fatalError)?k.defaults.fatalError:alert;if(g.grid&&null!=n){"object"===a.type(m[0])?b=m[0]:(x(d)&&(b.successfunc=d),void 0!==f&&(b.url=f),void 0!==h&&(b.extraparam=h),x(c)&&(b.aftersavefunc=c),x(t)&&(b.errorfunc=t),x(F)&&(b.afterrestorefunc=F),x(u)&&
(b.beforeSaveRow=u));var m=function(a){return l.jqGrid("getGridRes",a)},b=a.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,beforeSaveRow:null,ajaxSaveOptions:{},serializeSaveData:null,mtype:"POST",saveui:"enable",savetext:m("defaults.savetext")||"Saving..."},k.inlineEdit,n.inlineEditing||{},b),q={},I={},v={},D,A,H,G,z=l.jqGrid("getInd",e,!0),B=a(z);A=n.prmNames;var M=m("errors.errcap"),N=m("edit.bClose"),J,O,P=function(b,
c){try{var e=k.getRelativeRect.call(g,c);w.call(g,M,b,N,{top:e.top,left:e.left+a(g).closest(".ui-jqgrid").offset().left})}catch(Q){L(b)}};if(!1!==z&&(p=b.extraparam[A.oper]===A.addoper?"add":"edit",E.call(g,b,"beforeSaveRow",b,e,p)&&(m=B.attr("editable"),b.url=b.url||n.editurl,J="clientArray"!==b.url,"1"===m&&(G=(a.jgrid.detectRowEditing.call(g,e)||{}).savedRow,k.enumEditableCells.call(g,z,B.hasClass("jqgrid-new-row")?"add":"edit",function(b){var c=b.cm,e=c.formatter,n=c.editoptions||{},f=c.formatoptions||
{},h={},d=k.getEditedValue.call(g,a(b.dataElement),c,h,b.editable);"select"===c.edittype&&"select"!==c.formatter&&(I[c.name]=h.text);H=k.checkValues.call(g,d,b.iCol,void 0,void 0,a.extend(b,{oldValue:null!=G?G[c.name]:null,newValue:d,oldRowData:G}));if(null!=H&&!1===H[0])return O=!0,P(H[1],b.td),!1;"date"===e&&!0!==f.sendFormatted&&(d=a.unformat.date.call(g,d,c));J&&!0===n.NullIfEmpty&&""===d&&(d="null");q[c.name]=d}),!O)))){var y;A=n.prmNames;y=!1===n.keyName?A.id:n.keyName;if(q){q[A.oper]=A.editoper;
if(void 0===q[y]||""===q[y])q[y]=k.stripPref(n.idPrefix,e);q=a.extend({},q,n.inlineData||{},b.extraparam)}m={options:b,rowid:e,tr:z,iRow:z.rowIndex,savedRow:G,newData:q,mode:p};if(E.call(g,b,"saveRowValidation",m))if(J)l.jqGrid("progressBar",{method:"show",loadtype:b.saveui,htmlcontent:b.savetext}),v=a.extend({},q,v),v[y]=k.stripPref(n.idPrefix,v[y]),n.autoEncodeOnEdit&&a.each(v,function(a,b){x(b)||(v[a]=k.oldEncodePostedData(b))}),a.ajax(a.extend({url:x(b.url)?b.url.call(g,v[y],p,v,b):b.url,data:k.serializeFeedback.call(g,
x(b.serializeSaveData)?b.serializeSaveData:n.serializeRowData,"jqGridInlineSerializeSaveData",v),type:x(b.mtype)?b.mtype.call(g,p,b,v[y],v):b.mtype,complete:function(c,f){l.jqGrid("progressBar",{method:"hide",loadtype:b.saveui});if((300>c.status||304===c.status)&&(0!==c.status||4!==c.readyState)){var h,d;d=l.triggerHandler("jqGridInlineSuccessSaveRow",[c,e,b,p,v]);if(null==d||!0===d)d=[!0,q];d[0]&&x(b.successfunc)&&(d=b.successfunc.call(g,c,e,b,p,v));a.isArray(d)?(h=d[0],q=d[1]||q):h=d;if(!0===h){n.autoEncodeOnEdit&&
a.each(q,function(a,b){q[a]=k.oldDecodePostedData(b)});q=a.extend({},q,I);l.jqGrid("setRowData",e,q);B.attr("editable","0");for(h=0;h<n.savedRow.length;h++)if(String(n.savedRow[h].id)===String(e)){D=h;break}0<=D&&n.savedRow.splice(D,1);r.call(g,b.aftersavefunc,"jqGridInlineAfterSaveRow",e,c,q,b);null!=d[2]?l.jqGrid("changeRowid",e,n.idPrefix+d[2]):z.id!==n.idPrefix+q[y]&&l.jqGrid("changeRowid",z.id,n.idPrefix+q[y]);B.removeClass("jqgrid-new-row").off("keydown")}else r.call(g,b.errorfunc,"jqGridInlineErrorSaveRow",
e,c,f,null,b),!0===b.restoreAfterError&&l.jqGrid("restoreRow",e,b.afterrestorefunc)}},error:function(a,c,d){l.triggerHandler("jqGridInlineErrorSaveRow",[e,a,c,d,b]);if(x(b.errorfunc))b.errorfunc.call(g,e,a,c,d);else{a=a.responseText||a.statusText;try{w.call(g,M,'<div class="'+C.call(g,"error")+'">'+a+"</div>",N,{buttonalign:"right"})}catch(Q){L(a)}}!0===b.restoreAfterError&&l.jqGrid("restoreRow",e,b.afterrestorefunc)}},k.ajaxOptions,n.ajaxRowOptions,b.ajaxSaveOptions||{}));else{q=a.extend({},q,I);
A=l.jqGrid("setRowData",e,q);B.attr("editable","0");for(m=0;m<n.savedRow.length;m++)if(String(n.savedRow[m].id)===String(e)){D=m;break}0<=D&&n.savedRow.splice(D,1);r.call(g,b.aftersavefunc,"jqGridInlineAfterSaveRow",e,A,q,b);B.removeClass("jqgrid-new-row").off("keydown");z.id!==n.idPrefix+q[y]&&l.jqGrid("changeRowid",z.id,n.idPrefix+q[y])}else m.errorText&&P(m.errorText,z)}}},restoreRow:function(e,d){var f=a.makeArray(arguments).slice(1),h={};"object"===a.type(f[0])?h=f[0]:a.isFunction(d)&&(h.afterrestorefunc=
d);return this.each(function(){var c=this,d=a(c),f=c.p,p=-1,m={},b;if(c.grid){var g=a.extend(!0,{},k.inlineEdit,f.inlineEditing||{},h),l=d.jqGrid("getInd",e,!0);if(!1!==l&&E.call(c,g,"beforeCancelRow",g,e)){for(b=0;b<f.savedRow.length;b++)if(String(f.savedRow[b].id)===String(e)){p=b;break}if(0<=p){if(a.isFunction(a.fn.datepicker))try{a("input.hasDatepicker","#"+k.jqID(l.id)).datepicker("hide")}catch(n){}a.each(f.colModel,function(){var b=this.name;f.savedRow[p].hasOwnProperty(b)&&(m[b]=f.savedRow[p][b],
!this.formatter||"date"!==this.formatter||null!=this.formatoptions&&!0===this.formatoptions.sendFormatted||(m[b]=a.unformat.date.call(c,m[b],this)))});d.jqGrid("setRowData",e,m);a(l).attr("editable","0").off("keydown");f.savedRow.splice(p,1);a("#"+k.jqID(e),c).hasClass("jqgrid-new-row")&&setTimeout(function(){d.jqGrid("delRowData",e);d.jqGrid("showAddEditButtons",!1)},0)}r.call(c,g.afterrestorefunc,"jqGridInlineAfterRestoreRow",e)}}})},addRow:function(d){return this.each(function(){if(this.grid){var e=
this,f=a(e),h=e.p,c=a.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,beforeAddRow:null,addRowParams:{extraparam:{}}},k.inlineEdit,h.inlineEditing||{},d||{});E.call(e,c,"beforeAddRow",c.addRowParams)&&(c.rowID=a.isFunction(c.rowID)?c.rowID.call(e,c):null!=c.rowID?c.rowID:k.randId(),!0===c.useDefValues&&a(h.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var d=this.editoptions.defaultValue;c.initdata[this.name]=a.isFunction(d)?d.call(e):
d}}),c.rowID=h.idPrefix+c.rowID,f.jqGrid("addRowData",c.rowID,c.initdata,c.position),a("#"+k.jqID(c.rowID),e).addClass("jqgrid-new-row"),c.useFormatter?a("#"+k.jqID(c.rowID)+" .ui-inline-edit",e).click():(h=h.prmNames,c.addRowParams.extraparam[h.oper]=h.addoper,f.jqGrid("editRow",c.rowID,c.addRowParams),f.jqGrid("setSelection",c.rowID)))}})},inlineNav:function(e,p){"object"===typeof e&&(p=e,e=void 0);return this.each(function(){var f=this,h=a(f),c=f.p;if(this.grid&&null!=c){var t,r=e===c.toppager?
c.idSel+"_top":c.idSel,u=e===c.toppager?c.id+"_top":c.id,m=C.call(f,"disabled"),b=a.extend(!0,{edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",save:!0,saveicon:"ui-icon-disk",cancel:!0,cancelicon:"ui-icon-cancel",commonIconClass:"ui-icon",iconsOverText:!1,addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:!0},h.jqGrid("getGridRes","nav"),k.nav||{},c.navOptions||{},k.inlineNav||{},c.inlineNavOptions||{},p||{});if(void 0===e)if(c.pager)if(h.jqGrid("inlineNav",
c.pager,b),c.toppager)e=c.toppager,r=c.idSel+"_top",u=c.id+"_top";else return;else c.toppager&&(e=c.toppager,r=c.idSel+"_top",u=c.id+"_top");if(void 0!==e&&(t=a(e),!(0>=t.length))){0>=t.find(".navtable").length&&h.jqGrid("navGrid",e,{add:!1,edit:!1,del:!1,search:!1,refresh:!1,view:!1});c._inlinenav=!0;if(!0===b.addParams.useFormatter){t=c.colModel;var g,l;for(g=0;g<t.length;g++)if(t[g].formatter&&"actions"===t[g].formatter){t[g].formatoptions&&(l={keys:!1,onEdit:null,onSuccess:null,afterSave:null,
onError:null,afterRestore:null,extraparam:{},url:null},t=a.extend(l,t[g].formatoptions),b.addParams.addRowParams={keys:t.keys,oneditfunc:t.onEdit,successfunc:t.onSuccess,url:t.url,extraparam:t.extraparam,aftersavefunc:t.afterSave,errorfunc:t.onError,afterrestorefunc:t.afterRestore});break}}b.add&&h.jqGrid("navButtonAdd",e,{caption:b.addtext,title:b.addtitle,commonIconClass:b.commonIconClass,buttonicon:b.addicon,iconsOverText:b.iconsOverText,id:u+"_iladd",onClickButton:function(){d(this,m)||h.jqGrid("addRow",
b.addParams)}});b.edit&&h.jqGrid("navButtonAdd",e,{caption:b.edittext,title:b.edittitle,commonIconClass:b.commonIconClass,buttonicon:b.editicon,iconsOverText:b.iconsOverText,id:u+"_iledit",onClickButton:function(){if(!d(this,m)){var a=c.selrow;a?h.jqGrid("editRow",a,b.editParams):f.modalAlert()}}});b.save&&(h.jqGrid("navButtonAdd",e,{caption:b.savetext,title:b.savetitle,commonIconClass:b.commonIconClass,buttonicon:b.saveicon,iconsOverText:b.iconsOverText,id:u+"_ilsave",onClickButton:function(){if(!d(this,
m)){var e=c.savedRow[0].id;if(e){var g=c.prmNames,l=g.oper,p=b.editParams;a("#"+k.jqID(e),f).hasClass("jqgrid-new-row")?(b.addParams.addRowParams.extraparam[l]=g.addoper,p=b.addParams.addRowParams):(b.editParams.extraparam||(b.editParams.extraparam={}),b.editParams.extraparam[l]=g.editoper);h.jqGrid("saveRow",e,p)}else f.modalAlert()}}}),a(r+"_ilsave").addClass(m));b.cancel&&(h.jqGrid("navButtonAdd",e,{caption:b.canceltext,title:b.canceltitle,commonIconClass:b.commonIconClass,buttonicon:b.cancelicon,
iconsOverText:b.iconsOverText,id:u+"_ilcancel",onClickButton:function(){if(!d(this,m)){var e=c.savedRow[0].id,g=b.editParams;e?(a("#"+k.jqID(e),f).hasClass("jqgrid-new-row")&&(g=b.addParams.addRowParams),h.jqGrid("restoreRow",e,g)):f.modalAlert()}}}),a(r+"_ilcancel").addClass(m));if(!0===b.restoreAfterSelect)h.on("jqGridSelectRow",function(a,e){if(0<c.savedRow.length&&!0===c._inlinenav){var d=c.savedRow[0].id;e!==d&&"number"!==typeof d&&h.jqGrid("restoreRow",d,b.editParams)}});h.on("jqGridInlineAfterRestoreRow jqGridInlineAfterSaveRow",
function(){h.jqGrid("showAddEditButtons",!1)});h.on("jqGridInlineEditRow",function(a,b){h.jqGrid("showAddEditButtons",!0,b)})}}})},showAddEditButtons:function(e){return this.each(function(){if(this.grid){var d=this.p,f=d.idSel,h=C.call(this,"disabled"),c=f+"_ilsave,"+f+"_ilcancel"+(d.toppager?","+f+"_top_ilsave,"+f+"_top_ilcancel":""),d=f+"_iladd,"+f+"_iledit"+(d.toppager?","+f+"_top_iladd,"+f+"_top_iledit":"");a(e?d:c).addClass(h);a(e?c:d).removeClass(h)}})}})});
//# sourceMappingURL=grid.inlinedit.map
